System.registerDynamic("components/app.css!github:systemjs/plugin-css@0.1.32/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.registerDynamic("components/index/README.md!github:Hypercubed/system-md-marked@1.0.1/md.js",[],!0,function($__require,exports,module){this||self;return module.exports='<h1 id="visualisation-gallery-of-lib">Visualisation Gallery of LIB</h1>\n<p>A datapackage for <a href="https://github.com/Hypercubed/Project-Chi">Project-Chi</a> that present a set a visualizations used at <a href="http://metasystems.riken.jp/">Laboratory for Integrated Bioinformatics</a>, <a href="http://www.riken.jp/en/">RIKEN</a></p>\n',module.exports}),System.register("components/error/error.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default","<div class=\"jumbotron ng-scope\">\r\n  {{error || 'Unknown Error'}}\r\n</div>\r\n")}}}),System.register("components/charts/treemap/component.js",["common/charts/treemap"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"treemap",dispatch:dispatch,title:"Treemap of flare package",width:800,height:600},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsTreemap){Chart=_commonChartsTreemap.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/treemap/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/charts/sunburst/component.js",["common/charts/sunburst"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"sunburst",dispatch:dispatch,title:"Sunburst of flare package",width:800,height:600},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsSunburst){Chart=_commonChartsSunburst.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/sunburst/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/dendrogram.js",["d3-selection","d3-hierarchy","d3-transition"],function(_export,_context){"use strict";function Chart(p){function hover(n){var d=d4.select("#"+p.id).selectAll(".n"+n.name);d.select("circle").style("stroke","#9a0026"),d.select("text").style("font-weight","bold");var path=d.datum().ancestors().slice(0,-1).reduce(function(t,a){return t+=link(a,!0)},"");d4.select("#"+p.id).select("path.hl").attr("d",path)}function hoverOut(n){var d=d4.select("#"+p.id).selectAll(".n"+n.name);d.select("circle").style("stroke",function(d){return d.data.collapsed?"#324eb3":"#009a74"}),d.select("text").style("font-weight",""),d4.select("#"+p.id).select("path.hl").attr("d",null)}var chart={version:1.1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{name:"root",size:1},p.title=p.title||"Dendrogram of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:10,left:50,right:200},p.shape=p.shape||"curve",chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update();break;case"collapse":action.node.collapsed=!0,chart.update();break;case"expand":action.node.collapsed=!1,chart.update();break;case"hover":action.node.hover=!0,hover(action.node);break;case"hoverOut":action.node.hover=!1,hoverOut(action.node)}},p.dispatch=p.dispatch||chart.consumer;var link=function(d,show){var path=void 0,f="L";return show?"comb"===p.shape?path="M"+d.y+", "+d.x+" "+f+d.parent.y+", "+d.parent.x:("curve"===p.shape&&(f="C"),path="M"+d.y+", "+d.x+" "+(""+f+(d.parent.y+p.space)+", "+d.x+" ")+(d.parent.y+p.space+", "+d.parent.x+" ")+(d.parent.y+", "+d.parent.x)):path="M"+d.parent.y+", "+d.parent.x+" L"+d.parent.y+", "+d.parent.x,path};return chart.init=function(){var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title);var tree=svg.append("g").attr("class","tree").attr("transform","translate("+p.margin.left+", "+p.margin.top+")").style("font-size",p.fontSize+"px");tree.append("g").attr("class","edges"),tree.append("g").attr("class","nodes"),tree.append("path").attr("class","edge hl").style("fill","none").style("stroke","#000").style("stroke-width","1.5px").style("pointer-events","none")},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){var filter=function(d){if(d.children&&!d.collapsed)return d.children},root=d4.hierarchy(p.data,filter);d4.cluster().size([p.height-p.margin.top-p.margin.bottom,p.width-p.margin.left-p.margin.right])(root),p.space=(p.width-p.margin.left-p.margin.right)/(2*root.height);var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=d4.select("#"+p.id).select(".edges").selectAll(".edge").data(root.descendants().slice(1),function(d){return d.data.name}),sel.exit().transition(t1).attr("d",function(d){return link(d,!1)}).style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return link(d,!0)}),add=sel.enter().append("path").attr("class",function(d){return"edge e"+d.data.name.replace(" ","")}).attr("d",function(d){return link(d,!1)}).style("fill","none").style("stroke","#ccc").style("stroke-width","1.5px").style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return link(d,!0)}).style("opacity",1),sel=d4.select("#"+p.id).select(".nodes").selectAll(".node").data(root.descendants().slice(1),function(d){return d.data.name}),sel.exit().transition(t1).attr("transform",function(d){return"translate("+d.parent.y+", "+d.parent.x+")"}).style("opacity",0).remove(),sel.transition(t2).attr("transform",function(d){return"translate("+d.y+", "+d.x+")"}),add=sel.enter().append("g").attr("class",function(d){return"node n"+d.data.name.replace(" ","")}).attr("transform",function(d){var coord=[0,p.height/2];return d.parent&&(coord=[d.parent.y,d.parent.x]),"translate("+coord[0]+", "+coord[1]+")"}).style("cursor","pointer").style("opacity",0).on("click",function(d){d.data.collapsed?p.dispatch({type:"expand",node:d.data}):d.parent&&d.children&&p.dispatch({type:"collapse",node:d.data})}).on("mouseover",function(d){return p.dispatch({type:"hover",node:d.data})}).on("mouseout",function(d){return p.dispatch({type:"hoverOut",node:d.data})}),add.append("circle").style("stroke-width","2px"),add.append("text").attr("dy",3),sel=add.merge(sel),sel.transition(t3).attr("transform",function(d){return"translate("+d.y+", "+d.x+")"}).style("opacity",1),sel.select("circle").attr("r",function(d){return d.data.collapsed?5.5:4.5}).style("fill",function(d){return d.data.collapsed?"#ddd":"#fff"}).style("stroke",function(d){return d.data.collapsed?"#324eb3":"#009a74"}),sel.select("text").attr("dx",function(d){return d.children?-8:8}).style("text-anchor",function(d){return d.children?"end":"start"}).text(function(d){return d.data.name})},chart}var select,selectAll,hierarchy,cluster,transition,d4;return _export("default",Chart),{setters:[function(_d3Selection){select=_d3Selection.select,selectAll=_d3Selection.selectAll},function(_d3Hierarchy){hierarchy=_d3Hierarchy.hierarchy,cluster=_d3Hierarchy.cluster},function(_d3Transition){transition=_d3Transition.transition}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:select,selectAll:selectAll,hierarchy:hierarchy,cluster:cluster,transition:transition}:d3}}}),System.register("components/charts/dendrogram/component.js",["common/charts/dendrogram"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"dendro",dispatch:dispatch,title:"Dendrogram of flare package",width:800,height:2500},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsDendrogram){Chart=_commonChartsDendrogram.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/dendrogram/template.html",bindings:{dataPackage:"<package"}})}}}),System.registerDynamic("components/charts/radial/style.css!github:systemjs/plugin-css@0.1.32/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/charts/radial/chart.js",["d3"],function(_export,_context){"use strict";function Chart(opts){return opts=opts||{},function(selection){selection.each(function(d,i){var el=d3.select(this);el.selectAll("svg").remove();var radius=480,cluster=(d3.scale.category20c(),d3.layout.cluster().size([360,radius-120])),nodes=cluster.nodes(d);console.log("nodes",nodes);var diagonal=d3.svg.diagonal.radial().projection(function(d){return[d.y,d.x/180*Math.PI]}),svg=el.append("svg").attr("title","radial").attr("width",2*radius).attr("height",2*radius).append("g").attr("transform","translate("+radius+","+radius+")"),node=(svg.selectAll("path.link").data(cluster.links(nodes)).enter().append("path").attr("class","link").attr("d",diagonal),svg.selectAll("g.node").data(nodes).enter().append("g").attr("class","node").attr("transform",function(d){return"rotate("+(d.x-90)+")translate("+d.y+")"}));node.append("circle").attr("r",4.5),node.append("text").attr("dy",".31em").attr("text-anchor",function(d){return d.x<180?"start":"end"}).attr("transform",function(d){return d.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(d){return d.name})})}}var d3;return _export("default",Chart),{setters:[function(_d){d3=_d.default}],execute:function(){}}}),System.register("components/charts/radial/component.js",["./style.css!","d3","./chart"],function(_export,_context){"use strict";function controller(){function draw(){var data=$ctrl.dataPackage.resources.map(function(d){return d.data}),divs=d3.select("#chart").selectAll("div").data(data);divs.enter().append("div"),divs.exit().remove(),divs.call(chart)}var $ctrl=this,chart=new Chart;Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:draw},draw:draw,$onInit:draw})}var d3,Chart;return{setters:[function(_styleCss){},function(_d){d3=_d.default},function(_chart){Chart=_chart.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/radial/index.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/charts/clonal/component.js",["common/charts/clonal"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"clonal",dispatch:dispatch,title:"Clonal evolution diagram of flare package",width:800,height:2500},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsClonal){Chart=_commonChartsClonal.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/clonal/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/violin.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/toConsumableArray.js","d3-array","d3-axis","d3-scale","d3-shape","d3-selection","d3-transition"],function(_export,_context){"use strict";function Chart(p){function layoutChange(){var _this=this;d4.select(this).each(function(d){p.layouts[d]=_this.checked,chart.update()})}var chart={version:1.1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.options=p.options||null,p.data=p.data||{serie:[0,1]},p.title=p.title||"Violin plot of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:40,left:50,right:50},p.layouts=p.layouts||{violin:!0,box:!0,bar:!1,beeswarm:!1},p.ymin=p.ymin||null,p.ymax=p.ymax||null,p.catWidth=p.catWidth||100,p.catSpacing=p.catSpacing||20,p.strokeWidth=p.strokeWidth||3,p.resolution=p.resolution||10,p.interpolation=p.interpolation||"catmull",p.xScale="common"===p.xScale?"common":"each",p.bg=p.bg||["#F88","#A8F","#AF8","#8FF","#FA8","#F8F","#8F8","#88F","#FF8","#F8A","#8FA","#8AF"],p.fg=p.fg||["#900","#609","#690","#099","#960","#909","#090","#009","#990","#906","#096","#069"];var color=d4.scaleOrdinal(d4.range(12)),v={};return chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update();break;case"setLayouts":var a=action.payload;void 0!==a.violin&&(p.layouts.violin=a.violin),void 0!==a.box&&(p.layouts.box=a.box),void 0!==a.bar&&(p.layouts.bar=a.bar),void 0!==a.beeswarm&&(p.layouts.beeswarm=a.beeswarm),chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){switch(v.width=300,v.domain=[0,1],v.curve="",p.interpolation){case"linear":v.curve=d4.curveLinear;break;case"step":v.curve=d4.curveStepAfter;break;case"basis":v.curve=d4.curveBasis;break;default:v.curve=d4.curveCatmullRom}v.y=d4.scaleLinear().range([p.height-p.margin.bottom,p.margin.top]),v.x=d4.scaleLinear().range([0,p.catWidth]),v.yV=d4.scaleLinear().range([p.catWidth/2,0]),v.xV=d4.scaleLinear().range([p.height-p.margin.bottom,p.margin.top]).nice(),v.yAxisOut=d4.axisLeft(v.y).ticks(5).tickSize(5,0),v.yAxisIn=d4.axisRight(v.y).ticks(5).tickSize(v.width-p.margin.right-p.margin.left,0),v.svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",v.width).attr("height",p.height),v.svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),v.svg.append("g").attr("class","axis yOut").attr("transform","translate("+p.margin.left+",0)").call(v.yAxisOut),v.svg.append("g").attr("class","axis yIn").attr("transform","translate("+p.margin.left+",0)").call(v.yAxisIn);var sel=v.svg.append("g").attr("class","legend");sel.append("circle"),sel.append("text"),p.options&&(d4.select("#"+p.options).append("b").text("Layouts: "),d4.select("#"+p.options).selectAll("input").data(Object.keys(p.layouts)).enter().append("label").attr("for",function(d){return"layout-"+d}).text(function(d){return d}).append("input").attr("type","checkbox").attr("id",function(d){return"layout-"+d}).property("checked",function(d){return p.layouts[d]}).style("margin","0 10px 0 5px").on("change",layoutChange))},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){function addViolin(g,bins,k){"each"===p.xScale&&(v.yViolinMax=Math.max.apply(Math,_toConsumableArray(bins.map(function(vals){return vals.length}))),v.yV.domain([0,v.yViolinMax]));var area=d4.area().curve(v.curve).x(function(d){return v.xV(d.x0)}).y0(p.catWidth/2).y1(function(d){return v.yV(d.length)}),line=d4.line().curve(v.curve).x(function(d){return v.xV(d.x0)}).y(function(d){return v.yV(d.length)});sel=g.selectAll(".plus").data([0]),add=sel.enter().append("g").attr("class","plus").attr("transform","rotate(90,0,0)  translate(0,-"+p.catWidth+")"),add.append("path").attr("class","area").style("fill",p.bg[color(k)]).style("stroke","none"),add.append("path").attr("class","line").style("fill","none").style("stroke","#000"),sel=g.selectAll(".minus").data([0]),add=sel.enter().append("g").attr("class","minus").attr("transform","rotate(90,0,0) scale(1,-1)"),add.append("path").attr("class","area").style("fill",p.bg[color(k)]).style("stroke","none"),add.append("path").attr("class","line").style("fill","none").style("stroke","#000"),g.selectAll(".area").transition(t3).attr("d",area(bins)),g.selectAll(".line").transition(t3).attr("d",line(bins))}function addBar(g,bins,k){"each"===p.xScale&&(v.yViolinMax=Math.max.apply(Math,_toConsumableArray(bins.map(function(vals){return vals.length}))),v.yV.domain([0,v.yViolinMax])),sel=g.selectAll(".plus").data([0]),add=sel.enter().append("g").attr("class","plus").attr("transform","rotate(90,0,0)  translate(0,-"+p.catWidth+")"),sel=g.selectAll(".minus").data([0]),add=sel.enter().append("g").attr("class","minus").attr("transform","rotate(90,0,0) scale(1,-1)"),sel=g.selectAll(".plus").selectAll("rect").data(bins),sel.exit().transition(t1).attr("width",0).attr("height",0).remove(),add=sel.enter().append("rect").style("fill",p.bg[color(k)]).style("stroke","#000"),sel=add.merge(sel),sel.transition(t3).attr("x",function(d){return v.xV(d.x0)}).attr("y",function(d){return v.yV(d.length)}).attr("width",function(d){return v.xV(d.x0)-v.xV(d.x1)}).attr("height",function(d){return v.yV(0)-v.yV(d.length)}),sel=g.selectAll(".minus").selectAll("rect").data(bins),sel.exit().transition(t1).attr("width",0).attr("height",0).remove(),add=sel.enter().append("rect").style("fill",p.bg[color(k)]).style("stroke","#000"),sel=add.merge(sel),sel.transition(t3).attr("x",function(d){return v.xV(d.x0)}).attr("y",function(d){return v.yV(d.length)}).attr("width",function(d){return v.xV(d.x0)-v.xV(d.x1)}).attr("height",function(d){return v.yV(0)-v.yV(d.length)})}function addCircle(g,bins,k){"each"===p.xScale&&(v.yViolinMax=Math.max.apply(Math,_toConsumableArray(bins.map(function(vals){return vals.length}))),v.yV.domain([0,v.yViolinMax]));var radius=(v.xV(bins[1].x0)-v.xV(bins[1].x1))/2,circleMax=Math.floor(v.yV(0)/radius),valueByCircle=Math.floor(v.yViolinMax/circleMax);0===valueByCircle&&(valueByCircle=1),v.svg.select(".legend").select("circle").attr("cx",radius+2).attr("cy",radius+2).attr("r",radius).style("fill",p.bg[0]).style("stroke","#000"),v.svg.select(".legend").select("text").attr("x",radius+12).attr("y",radius+2).attr("dy","0.5ex").text(function(){return 1===valueByCircle?"= 1":"= 1 to "+valueByCircle}),sel=g.selectAll("g").data([k]),add=sel.enter().append("g").attr("transform","rotate(90,0,0)  translate(0,-"+p.catWidth+")").style("fill",p.bg[color(k)]).style("stroke","#000"),sel=add.merge(sel);var sub=sel.selectAll("g").data(bins);add=sub.enter().append("g").attr("transform",function(d){return"translate("+v.xV(d.x0)+", "+v.yV(0)+")"}),sub=add.merge(sub),sub.transition(t3).attr("transform",function(d){return"translate("+v.xV(d.x0)+", "+v.yV(0)+")"}),sel=sub.selectAll("circle").data(function(d){var value=d.length,draw=[];if(value>0){var c=Math.ceil(value/valueByCircle),center=0;for(c%2!==0&&(draw.push(center),center+=radius);draw.length<c;)center+=radius,draw.push(center),draw.push(-center),center+=radius}return draw}),sel.exit().transition(t1).attr("r",0).remove(),add=sel.enter().append("circle").attr("cx",0).attr("cy",0).attr("r",0),sel=add.merge(sel),sel.transition(t3).attr("cy",function(d){return d}).attr("r",radius)}function addBoxPlot(g,vals,k,boxPlotWidth){for(var left=.5-boxPlotWidth/2,right=.5+boxPlotWidth/2,probs=[.05,.25,.5,.75,.95],i=0;i<probs.length;i++)probs[i]=v.y(d4.quantile(vals,probs[i]));var iSH=[0,2,4],iSV=[[0,1],[3,4]];sel=g.selectAll(".box").data([k]),add=sel.enter(),add.append("rect").attr("class","box").style("fill",p.bg[color(k)]).style("stroke",p.fg[color(k)]).style("stroke-width",p.strokeWidth),add.selectAll(".iSH").data(iSH).enter().append("line").attr("class","ISH").style("stroke",p.fg[color(k)]).style("stroke-width",p.strokeWidth),add.selectAll("iSV").data(iSV).enter().append("line").attr("class","ISV").style("stroke",p.fg[color(k)]).style("stroke-width",p.strokeWidth),add.selectAll(".mean").data([k]).enter().append("circle").attr("class","mean").style("fill",p.bg[color(k)]).style("stroke","#000").attr("r",v.x(boxPlotWidth/5)),g.select(".box").transition(t3).attr("x",v.x(left)).attr("width",v.x(right)-v.x(left)).attr("y",probs[3]).attr("height",-probs[3]+probs[1]),g.selectAll(".ISH").transition(t3).attr("x1",v.x(left)).attr("x2",v.x(right)).attr("y1",function(d){return probs[d]}).attr("y2",function(d){return probs[d]}),g.selectAll(".ISV").transition(t3).attr("x1",v.x(.5)).attr("x2",v.x(.5)).attr("y1",function(d){return probs[d[0]]}).attr("y2",function(d){return probs[d[1]]}),g.selectAll(".mean").transition(t3).attr("cx",v.x(.5)).attr("cy",v.y(d4.mean(vals)))}function addLabel(g,label){g.selectAll("text").data([label]).enter().append("text").attr("class","label").attr("x",v.x(.5)).attr("y",p.height-p.margin.bottom/2).attr("dy","-0.5ex").attr("text-anchor","middle").style("fill","#000").text(label)}var keys=Object.keys(p.data).sort(d4.ascending),sorted=keys.map(function(k){return p.data[k].sort(d4.ascending)}),sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);v.width=p.catSpacing+keys.length*(p.catWidth+p.catSpacing)+p.margin.left+p.margin.right,d4.select("#"+p.div).select("svg").transition(t3).attr("width",v.width),null===p.ymin?v.domain[0]=Math.min.apply(Math,_toConsumableArray(sorted.map(function(s){return s[0]})))-1:v.domain[0]=p.ymin,null===p.ymax?v.domain[1]=Math.max.apply(Math,_toConsumableArray(sorted.map(function(s){return s[s.length-1]})))+1:v.domain[1]=p.ymax,v.y.domain(v.domain),v.yAxisOut=d4.axisLeft(v.y).ticks(5).tickSize(5,0),v.yAxisIn=d4.axisRight(v.y).ticks(5).tickSize(v.width-p.margin.right-p.margin.left,0),v.svg.select(".yOut").transition(t3).call(v.yAxisOut),v.svg.select(".yIn").transition(t3).call(v.yAxisIn),v.xV.domain(v.domain),v.bins=sorted.map(function(s){return d4.histogram().thresholds(v.xV.ticks(p.resolution))(s)}),"common"===p.xScale&&(v.yViolinMax=Math.max.apply(Math,_toConsumableArray(v.bins.map(function(b){return Math.max.apply(Math,_toConsumableArray(b.map(function(vals){return vals.length})))}))),v.yV.domain([0,v.yViolinMax])),sel=d4.select("#"+p.div).select("svg").selectAll(".serie").data(keys,function(k){return k}),sel.exit().transition(t1).style("opacity",0).remove(),sel.transition(t2).attr("transform",function(d,i){return"translate("+(p.catSpacing+i*(p.catWidth+p.catSpacing)+p.margin.left)+", 0)"}),add=sel.enter().append("g").attr("class",function(d,i){return"serie "+keys[i]}).style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("transform",function(k,i){return"translate("+(p.catSpacing+i*(p.catWidth+p.catSpacing)+p.margin.left)+", 0)"}).style("opacity",1),keys.forEach(function(k,i){var g=d4.select("#"+p.div).select("svg").select("."+k),lay=["violin","bar","beeswarm","box"];lay.forEach(function(l){g.selectAll("."+l).data([l]).enter().append("g").attr("class",l);var sub=g.select("."+l);if(p.layouts[l])switch(sub.transition(t2).style("opacity",1),l){case"violin":addViolin(sub,v.bins[i],k);break;case"bar":addBar(sub,v.bins[i],k);break;case"beeswarm":addCircle(sub,v.bins[i],k);break;case"box":addBoxPlot(sub,sorted[i],k,.1)}else sub.transition(t1).style("opacity",0).text(null)}),addLabel(g,k),p.layouts.beeswarm?v.svg.select(".legend").attr("transform","translate("+(v.width-120)+", "+(p.height-p.margin.bottom/2)+")").style("opacity",1):v.svg.select(".legend").style("opacity",0)})},chart}var _toConsumableArray,ascending,extent,histogram,max,mean,quantile,range,axisLeft,axisRight,scaleOrdinal,scaleLinear,area,line,curveBasis,curveCatmullRom,curveLinear,curveStepAfter,select,selectAll,transition,d4;return _export("default",Chart),{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0012BabelHelpersToConsumableArrayJs.default},function(_d3Array){ascending=_d3Array.ascending,extent=_d3Array.extent,histogram=_d3Array.histogram,max=_d3Array.max,mean=_d3Array.mean,quantile=_d3Array.quantile,range=_d3Array.range},function(_d3Axis){axisLeft=_d3Axis.axisLeft,axisRight=_d3Axis.axisRight},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal,scaleLinear=_d3Scale.scaleLinear},function(_d3Shape){area=_d3Shape.area,line=_d3Shape.line,curveBasis=_d3Shape.curveBasis,curveCatmullRom=_d3Shape.curveCatmullRom,curveLinear=_d3Shape.curveLinear,curveStepAfter=_d3Shape.curveStepAfter},function(_d3Selection){select=_d3Selection.select,selectAll=_d3Selection.selectAll},function(_d3Transition){transition=_d3Transition.transition}],execute:function(){d4={},d4="undefined"===d3||d3.version?{ascending:ascending,extent:extent,histogram:histogram,max:max,mean:mean,quantile:quantile,range:range,axisLeft:axisLeft,axisRight:axisRight,scaleOrdinal:scaleOrdinal,scaleLinear:scaleLinear,area:area,line:line,curveBasis:curveBasis,curveCatmullRom:curveCatmullRom,curveLinear:curveLinear,curveStepAfter:curveStepAfter,select:select,selectAll:selectAll,transition:transition}:d3}}}),System.register("components/charts/violin/component.js",["common/charts/violin"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"violin",options:"options",dispatch:dispatch,title:"Charaters Stats",height:300,catWidth:100,catSpacing:10,resolution:20},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsViolin){Chart=_commonChartsViolin.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/violin/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/pie.js",["d3-scale","d3-scale-chromatic","d3-shape","d3-transition","d3-selection"],function(_export,_context){"use strict";function Chart(p){function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){return"name: "+d.data.name+"\n          <br/>value: "+d.data.size.toLocaleString()+"\n          <br/>("+percent(d.data.size)+"%)"});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var x=0,y=0;d3sel.event?(y=d3sel.event.pageY,x=d3sel.event.pageX):(y=d3.event.layerY,x=d3.event.layerX),d4.select("#tip").style("top",y-10+"px").style("left",x+10+"px")}}var chart={version:1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{serie:[{name:"root",size:1}]},p.title=p.title||"Pie chart of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:5,left:5,right:0},p.color=p.color||d4.schemeSet3,p.inner=p.inner||70,p.cornerRadius=p.cornerRadius||3,p.padAngle=p.padAngle||.01,p.aMin=p.aMin||.1,p.radius=Math.min(p.width-p.margin.left-p.margin.right,p.height-p.margin.top-p.margin.bottom)/2,p.total=0;var color=d4.scaleOrdinal(p.color),arc=d4.arc().innerRadius(p.inner).outerRadius(p.radius).cornerRadius(p.cornerRadius).padAngle(p.padAngle),coord=function(d){var a=(d.startAngle+d.endAngle)/2-Math.PI/2,inner={x:(p.inner+5)*Math.cos(a),y:(p.inner+5)*Math.sin(a)},outer={x:(p.radius-5)*Math.cos(a),y:(p.radius-5)*Math.sin(a)};return{inner:inner,outer:outer}},path=function(d){var c=coord(d);return c.inner.x<c.outer.x?"M"+c.inner.x+","+c.inner.y+"L"+c.outer.x+","+c.outer.y:"M"+c.outer.x+","+c.outer.y+"L"+c.inner.x+","+c.inner.y},align=function(d){var c=coord(d);return c.inner.x<c.outer.x},percent=function(value){var res=Math.round(100*value*100/p.total)/100;return res};return chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),svg.append("g").attr("transform","translate("+(p.margin.left+p.radius)+", "+(p.margin.top+p.radius)+")").classed("arcs",!0),svg.append("g").attr("transform","translate("+(p.margin.left+p.radius)+", "+(p.margin.top+p.radius)+")").classed("labels",!0),svg.append("g").attr("transform","translate("+(p.margin.left+p.radius)+", "+(p.margin.top+p.radius)+")").classed("center",!0).append("text").attr("text-anchor","middle").attr("dy","0.5ex")},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){var root=d4.pie().value(function(d){return d.size})(p.data.serie);p.total=root.reduce(function(res,r){return res+=r.data.size},0),d4.select("#"+p.id).select(".center").select("text").text(p.total.toLocaleString());var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=d4.select("#"+p.id).select(".arcs").selectAll("path").data(root,function(d){return d.data.name}),sel.exit().transition(t1).attr("d","M0,0A0,0Z").style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return arc(d)}),add=sel.enter().append("path").attr("class",function(d){return"v"+d.data.name}).attr("d","M0,0A0,0Z").style("opacity",0).style("fill",function(d){return color(d.data.name)}).style("fill-rule","evenodd").style("stroke","#000").style("cursor","pointer").on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return arc(d)}).style("opacity",1);var labelled=root.filter(function(d){return d.endAngle-d.startAngle>p.aMin});sel=d4.select("#"+p.id).select(".labels").selectAll("path").data(labelled,function(d){return d.data.name}),sel.exit().transition(t1).attr("d","M0,0A0,0Z").style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return path(d)}),add=sel.enter().append("path").attr("id",function(d){return"map"+p.id+d.data.name}).attr("d","M0,0A0,0Z").style("pointer-events","none").style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return path(d)}),sel=d4.select("#"+p.id).select(".labels").selectAll("text").data(labelled,function(d){return d.data.name}),sel.exit().transition(t1).style("opacity",0).remove(),sel.transition(t2).attr("text-anchor",function(d){return align(d)?"end":"start"}),add=sel.enter().append("text").attr("dy","0.5ex").style("pointer-events","none"),sel=add.merge(sel),sel.transition(t3).attr("text-anchor",function(d){return align(d)?"end":"start"}),sel=d4.select("#"+p.id).select(".labels").selectAll("text").selectAll("textPath").data(function(d){return[d]}),sel.transition(t2).attr("startOffset",function(d){return align(d)?"100%":"0%"}),add=sel.enter().append("textPath").attr("xlink:href",function(d){return"#map"+p.id+d.data.name}).text(function(d){return d.data.name}),sel=add.merge(sel),sel.transition(t3).attr("startOffset",function(d){return align(d)?"100%":"0%"})},chart}var scaleOrdinal,schemeSet3,arc,pie,transition,d3sel,d4;return _export("default",Chart),
{setters:[function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal},function(_d3ScaleChromatic){schemeSet3=_d3ScaleChromatic.schemeSet3},function(_d3Shape){arc=_d3Shape.arc,pie=_d3Shape.pie},function(_d3Transition){transition=_d3Transition.transition},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,transition:transition,scaleOrdinal:scaleOrdinal,schemeSet3:schemeSet3,arc:arc,pie:pie}:d3}}}),System.register("components/charts/pie/component.js",["common/charts/pie"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"pie",title:'Pie chart of "layout" node of flare package',dispatch:dispatch},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsPie){Chart=_commonChartsPie.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/pie/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/heatmap.js",["d3-interpolate","d3-scale","d3-transition","d3-selection"],function(_export,_context){"use strict";function Chart(p){function path(mode,d,i){var path=void 0,line=0;return"L"===mode?(line=i*p.gridHeight,path="M"+p.legend.padding+","+(line+p.gridHeight/2)+" L"+(p.legend.left-p.legend.padding)+","+(line+p.gridHeight/2)):"R"===mode?(line=i*p.gridHeight,path="M"+p.legend.padding+","+(line+p.gridHeight/2)+" L"+(p.legend.right-p.legend.padding)+","+(line+p.gridHeight/2)):"T"===mode?(line=i*p.gridWidth,path="M"+(line+p.legend.padding)+","+(p.legend.top-p.legend.padding)+" L"+(line+p.gridWidth-p.legend.padding)+","+p.legend.padding):"B"===mode?(line=i*p.gridWidth,path="M"+(line+p.legend.padding)+","+p.legend.padding+" L"+(line+p.gridWidth-p.legend.padding)+","+(p.legend.bottom-p.legend.padding)):console.log("Error addLabel mode"),path}function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){return"Row: "+d.row+"<br/>\nColumn: "+d.col+"<br/>\nValue: "+d.value});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var x=0,y=0;d3sel.event?(y=d3sel.event.pageY,x=d3sel.event.pageX):(y=d3.event.layerY,x=d3.event.layerX),d4.select("#tip").style("top",y-10+"px").style("left",x+10+"px")}}var chart={version:1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{row1:{column1:1}},p.title=p.title||"Heatmap of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||400,p.margin=p.margin||{top:30,bottom:5,left:5,right:5,padding:1},p.legend=p.legend||{top:100,bottom:100,left:100,right:100,padding:5},p.grid=p.grid||!1,p.gridWidth=p.gridWidth||0,p.gridHeight=p.gridHeight||0,p.colorNull="#fff",p.color=p.color||["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],p.cornerRadius=p.cornerRadius||3;var color=d4.scaleSequential(d4.interpolateRgbBasis(p.color)),scale=d4.scaleLinear().range([0,1]);return p.max=0,chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),svg.append("g").attr("transform","translate("+(p.margin.left+p.legend.left)+", "+(p.margin.top+p.legend.top)+")").classed("rows",!0),svg.append("g").classed("legendTop",!0).attr("transform","translate("+(p.margin.left+p.legend.left)+", "+p.margin.top+")"),svg.append("g").classed("legendBottom",!0),svg.append("g").classed("legendLeft",!0).attr("transform","translate("+p.margin.left+", "+(p.margin.top+p.legend.top)+")"),svg.append("g").classed("legendRight",!0)},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){function addLegend(mode,g,data){sel=g.selectAll("path").data(data,function(d){return d}),sel.exit().transition(t1).remove(),sel.transition(t2).attr("d",function(d,i){return path(mode,d,i)}),add=sel.enter().append("path").attr("id",function(d){return"map"+p.id+mode+d.replace(" ","_")}).attr("d",function(d,i){return path(mode,d,i)}).style("pointer-events","none").style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d,i){return path(mode,d,i)}),sel=g.selectAll("text").data(data,function(d){return d}),sel.exit().transition(t1).style("opacity",0).remove(),add=sel.enter().append("text").attr("text-anchor","left").attr("dy","0.5ex").style("pointer-events","none").style("opacity",0),add.append("textPath").attr("xlink:href",function(d){return"#map"+p.id+mode+d.replace(" ","_")}).text(function(d){return d}),sel=add.merge(sel),sel.transition(t3).style("opacity",1)}p.labelX=[],p.labelY=[],p.heatmap=[],Object.keys(p.data).forEach(function(row){var y=p.labelY.indexOf(row);y<0&&(y=p.labelY.length,p.labelY.push(row)),Object.keys(p.data[row]).forEach(function(col){var x=p.labelX.indexOf(col);x<0&&(x=p.labelX.length,p.labelX.push(col)),void 0===p.heatmap[y]&&(p.heatmap[y]=[]),p.heatmap[y][x]=p.data[row][col],p.max=Math.max(p.max,p.data[row][col])})}),scale.domain([0,p.max]),p.labelX=p.labelX.map(function(m,i){return[m,i]}),p.labelY=p.labelY.map(function(m,i){return[m,i]}),p.labelX.sort(function(a,b){return a[0]<b[0]?-1:1}),p.labelY.sort(function(a,b){return a[0]<b[0]?-1:1}),p.grid?(p.width=p.margin.left+p.legend.left+p.labelX.length*p.gridWidth+p.legend.right+p.margin.right,p.height=p.margin.top+p.legend.top+p.labelY.length*p.gridHeight+p.legend.bottom+p.margin.bottom):(p.gridWidth=(p.width-p.margin.left-p.legend.left-p.margin.right-p.legend.right)/p.labelX.length,p.gridHeight=(p.height-p.margin.top-p.legend.top-p.margin.bottom-p.legend.bottom)/p.labelY.length);var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay),svg=d4.select("#"+p.id).attr("width",p.width).attr("height",p.height);svg.select(".legendBottom").transition(t2).attr("transform","translate("+(p.margin.left+p.legend.left)+", "+(p.height-p.margin.bottom-p.legend.bottom)+")"),svg.select(".legendRight").transition(t2).attr("transform","translate("+(p.width-p.margin.right-p.legend.right)+", "+(p.margin.top+p.legend.top)+")"),p.legend.top>2*p.legend.padding&&addLegend("T",svg.select(".legendTop"),p.labelX.map(function(m){return m[0]})),p.legend.bottom>2*p.legend.padding&&addLegend("B",svg.select(".legendBottom"),p.labelX.map(function(m){return m[0]})),p.legend.left>2*p.legend.padding&&addLegend("L",svg.select(".legendLeft"),p.labelY.map(function(m){return m[0]})),p.legend.right>2*p.legend.padding&&addLegend("R",svg.select(".legendRight"),p.labelY.map(function(m){return m[0]})),sel=d4.select("#"+p.id).select(".rows").selectAll("g").data(p.labelY.map(function(y){return[y[0],p.heatmap[y[1]]]})),sel.exit().transition(t1).style("opacity",0).remove(),sel.transition(t2).attr("transform",function(d,i){return"translate(0, "+i*p.gridHeight+")"}),add=sel.enter().append("g").attr("transform",function(d,i){return"translate(0, "+i*p.gridHeight+")"}).style("opacity",0),sel=add.merge(sel),sel.transition(t3).style("opacity",1),sel=d4.select("#"+p.id).select(".rows").selectAll("g").selectAll("rect").data(function(d){return p.labelX.map(function(x){return[d[0],x[0],d[1][x[1]]||0]})},function(d){return d[0]+d[1]}),sel.exit().transition(t1).style("opacity",0).remove(),sel.transition(t2).attr("x",function(d,i){return i*p.gridWidth+p.margin.padding}).attr("width",p.gridWidth-2*p.margin.padding).attr("height",p.gridHeight-2*p.margin.padding).style("fill",function(d){return 0===d[2]?p.colorNull:color(scale(d[2]))}),add=sel.enter().append("rect").attr("x",function(d,i){return i*p.gridWidth+p.margin.padding}).attr("y",p.margin.padding).attr("width",0).attr("height",0).attr("rx",p.cornerRadius).attr("ry",p.cornerRadius).style("opacity",0).style("fill","#fff").style("fill-rule","evenodd").style("stroke","#000").style("cursor","pointer").on("mouseover",function(d){return tip("show",{row:d[0],col:d[1],value:d[2]})}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.transition(t3).attr("width",p.gridWidth-2*p.margin.padding).attr("height",p.gridHeight-2*p.margin.padding).style("opacity",1).style("fill",function(d){return 0===d[2]?p.colorNull:color(scale(d[2]))})},chart}var interpolateRgbBasis,scaleLinear,scaleSequential,transition,d3sel,d4;return _export("default",Chart),{setters:[function(_d3Interpolate){interpolateRgbBasis=_d3Interpolate.interpolateRgbBasis},function(_d3Scale){scaleLinear=_d3Scale.scaleLinear,scaleSequential=_d3Scale.scaleSequential},function(_d3Transition){transition=_d3Transition.transition},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,transition:transition,interpolateRgbBasis:interpolateRgbBasis,scaleLinear:scaleLinear,scaleSequential:scaleSequential}:d3}}}),System.register("components/charts/heatmap/component.js",["common/charts/heatmap"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"heatmapSVG",title:'Heatmap derived from "layout" node of flare package',dispatch:dispatch},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsHeatmap){Chart=_commonChartsHeatmap.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/charts/heatmap/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/charts/charts-index/routes.js",["angular","./component","../treemap/component","../sunburst/component","../dendrogram/component","../radial/component","../clonal/component","../violin/component","../pie/component","../heatmap/component"],function(_export,_context){"use strict";function routeConfig($routeProvider){$routeProvider.when("/charts",{template:'<charts data-package="$resolve.dataPackage"></charts>',datapackageUrl:"components/charts/charts-index/datapackage.json"}).when("/charts/treemap",{template:'<treemap data-package="$resolve.dataPackage"></treemap>',datapackageUrl:"components/charts/treemap/datapackage.json"}).when("/charts/sunburst",{template:'<sunburst data-package="$resolve.dataPackage"></sunburst>',datapackageUrl:"components/charts/sunburst/datapackage.json"}).when("/charts/dendrogram",{template:'<dendrogram data-package="$resolve.dataPackage"></dendrogram>',datapackageUrl:"components/charts/dendrogram/datapackage.json"}).when("/charts/radial",{template:'<radial data-package="$resolve.dataPackage"></radial>',datapackageUrl:"components/charts/radial/datapackage.json"}).when("/charts/clonal",{template:'<clonal data-package="$resolve.dataPackage"></clonal>',datapackageUrl:"components/charts/clonal/datapackage.json"}).when("/charts/violin",{template:'<violin data-package="$resolve.dataPackage"></violin>',datapackageUrl:"components/charts/violin/datapackage.json"}).when("/charts/pie",{template:'<pie data-package="$resolve.dataPackage"></pie>',datapackageUrl:"components/charts/pie/datapackage.json"}).when("/charts/heatmap",{template:'<heatmap data-package="$resolve.dataPackage"></heatmap>',datapackageUrl:"components/charts/heatmap/datapackage.json"}).otherwise({redirectTo:"/"})}var angular,chartsComponent,treemapComponent,sunburstComponent,dendrogramComponent,radialComponent,clonalComponent,violinComponent,pieComponent,heatmapComponent;return{setters:[function(_angular){angular=_angular.default},function(_component){chartsComponent=_component.default},function(_treemapComponent){treemapComponent=_treemapComponent.default},function(_sunburstComponent){sunburstComponent=_sunburstComponent.default},function(_dendrogramComponent){dendrogramComponent=_dendrogramComponent.default},function(_radialComponent){radialComponent=_radialComponent.default},function(_clonalComponent){clonalComponent=_clonalComponent.default},function(_violinComponent){violinComponent=_violinComponent.default},function(_pieComponent){pieComponent=_pieComponent.default},function(_heatmapComponent){heatmapComponent=_heatmapComponent.default}],execute:function(){routeConfig.$inject=["$routeProvider"],_export("default",angular.module("charts-index",["projectX.dataService"]).component("charts-idx",chartsComponent).component("treemap",treemapComponent).component("sunburst",sunburstComponent).component("dendrogram",dendrogramComponent).component("radial",radialComponent).component("clonal",clonalComponent).component("violin",violinComponent).component("pie",pieComponent).component("heatmap",heatmapComponent).config(routeConfig))}}}),System.register("components/charts/charts-index/template.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div class="row _common_styles_index__index">\n  <h2 class="title">{{$ctrl.dataPackage.title}}</h2>\n  <p class="lead" marked="$ctrl.dataPackage.description"></p>\n  <div class="row">\n    <div class="col-md-4" ng-repeat="(filename,file) in $ctrl.dataPackage.resources" ng-if="file.data">\n      <a ng-href="{{file.link}}">\n        <div class="card" style="background-image: url({{file.data.image}});">\n          <div>\n            <h3>{{file.data.name}}</h3>\n            <p marked="file.data.description"></p>\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n</div>\n')}}}),System.register("components/charts/charts-index/component.js",["./template.html!text","common/styles/index.css!"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)})}var template;return{setters:[function(_templateHtmlText){template=_templateHtmlText.default},function(_commonStylesIndexCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,template:template,bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/mutbypos.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/toConsumableArray.js","d3-axis","d3-scale","d3-shape","d3-transition","d3-selection"],function(_export,_context){"use strict";function Chart(p){function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){return"Position: "+d.pos+"<br/>\nValue: "+d.value});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var x=0,y=0;d3sel.event?(y=d3sel.event.pageY,x=d3sel.event.pageX):(y=d3.event.layerY,x=d3.event.layerX),d4.select("#tip").style("top",y-10+"px").style("left",x+10+"px")}}var chart={version:1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{5:{a:1,t:1,g:1,c:1},10:{a:2,t:2,g:2,c:2}},p.title=p.title||"Mutation by position of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||400,p.margin=p.margin||{top:50,bottom:40,left:40,right:20},p.xRange=p.xRange||[0,15],p.yRange=p.yRange||[0,null],p.frames=p.frames||[{label:"FRAME1",x1:5,x2:10,fill:"#eee"}],p.masks=p.masks||[{label:"mask1",x1:1,x2:5,fill:"#808"}];var v={};v.labels=["a","t","g","c"];var color=d4.scaleOrdinal().domain(v.labels).range(["#274A99","#E4A527","#1FB71F","#E42727"]);return chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update();break;case"setMasks":p.masks=action.payload,chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){v.x=d4.scaleLinear().domain(p.xRange).range([p.margin.left,p.width-p.margin.right]),v.y=d4.scaleLinear().range([p.height-p.margin.bottom,p.margin.top]),v.xAxis=d4.axisBottom(v.x).ticks(10).tickSize(5,1),v.yAxisOut=d4.axisLeft(v.y).ticks(5).tickSize(5,0),v.yAxisIn=d4.axisRight(v.y).ticks(5).tickSize(p.width-p.margin.right-p.margin.left,0),v.svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);var sel=v.svg.selectAll(".frame").data(p.frames).enter().append("g").attr("class","frame");sel.append("text").attr("x",function(d){return v.x((d.x1+d.x2)/2)}).attr("y",p.margin.top).attr("dy","-0.5ex").attr("text-anchor","middle").text(function(d){return d.label}),sel.selectAll("rect").data(function(d){return[d]}).enter().append("rect").attr("x",function(d){return v.x(d.x1-.5)}).attr("y",p.margin.top).attr("width",function(d){return v.x(d.x2+1)-v.x(d.x1)}).attr("height",p.height-p.margin.top-p.margin.bottom).attr("stroke",function(d){return"none"===d.fill?"none":"#000"}).attr("fill",function(d){return d.fill}),v.svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),v.svg.append("g").attr("class","axis").attr("transform","translate(0, "+(p.height-p.margin.bottom)+")").call(v.xAxis),v.svg.append("g").attr("class","axis yOut").attr("transform","translate("+p.margin.left+",0)").call(v.yAxisOut),v.svg.append("g").attr("class","axis yIn").attr("transform","translate("+p.margin.left+",0)").call(v.yAxisIn),sel=v.svg.append("g").attr("class","legend"),sel.append("text").attr("x",p.margin.left/2).attr("y",p.height/2+p.margin.top).attr("text-anchor","middle").style("writing-mode","vertical-rl").text("Mutation count"),sel.append("text").attr("x",p.width/2+p.margin.left).attr("y",p.height-p.margin.bottom/2).attr("text-anchor","middle").attr("dy","0.5ex").text("Position"),sel=sel.append("g").attr("transform","translate("+(p.width-120)+", "+(p.height-p.margin.bottom/2)+")"),sel.selectAll("rect").data(v.labels).enter().append("rect").attr("x",function(d,i){return 30*(i-1)}).attr("y",0).attr("height",10).attr("width",10).attr("fill",function(d){return color(d)}),sel.selectAll("text").data(v.labels).enter().append("text").attr("x",function(d,i){return 30*(i-1)+15}).attr("y",5).attr("text-anchor","middle").attr("dy","0.5ex").text(function(d){return d}),v.svg.selectAll(".serie").data(v.labels).enter().append("g").attr("class","serie")},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){var poss=Object.keys(p.data),sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=v.svg.selectAll(".mask").data(p.masks),sel.exit().transition(t1).style("opacity",0).remove(),add=sel.enter().append("g").attr("class","mask").style("opacity",0),add.append("text").attr("x",v.x(0)).attr("y",v.y(0)-15).attr("dy","-0.5ex").attr("text-anchor","middle"),add.append("rect").attr("x",v.x(0)).attr("y",v.y(0)-10).attr("width",0).attr("height",10),sel=v.svg.selectAll(".mask").style("opacity",1),sel.selectAll("text").data(function(d){return[d]}).transition(t3).attr("x",function(d){return v.x((d.x1+d.x2)/2)}).text(function(d){return d.label}),sel.selectAll("rect").data(function(d){return[d]}).transition(t3).attr("x",function(d){return Math.max(v.x(0),v.x(d.x1-.5))}).attr("width",function(d){return v.x(d.x2+1)-v.x(d.x1)}).attr("stroke",function(d){return"none"===d.fill?"none":"#000"}).attr("fill",function(d){return d.fill}),poss.forEach(function(f){p.masks.forEach(function(g){f>=g.x1&&f<=g.x2&&(p.data[f]={a:0,t:0,g:0,c:0})})});var domain=[].concat(_toConsumableArray(p.yRange))||[0,null],sum=poss.map(function(pos){var mut=p.data[pos];return mut.a+mut.t+mut.g+mut.c});null===domain[1]&&(domain[1]=Math.max.apply(Math,_toConsumableArray(sum))+1),v.y.domain(domain),v.yAxisOut=d4.axisLeft(v.y).ticks(5).tickSize(5,0),v.yAxisIn=d4.axisRight(v.y).ticks(5).tickSize(p.width-p.margin.right-p.margin.left,0),v.svg.select(".yOut").transition(t3).call(v.yAxisOut),v.svg.select(".yIn").transition(t3).call(v.yAxisIn);var layout=d4.stack().keys(v.labels)(poss.map(function(m){return p.data[m]}));sel=d4.select("#"+p.id).selectAll(".serie").data(layout).attr("fill",function(d){return color(d.key)}).selectAll("rect").data(function(d){return d}),sel.exit().transition(t1).attr("y",v.y(0)).attr("height",0).remove(),sel.transition(t2).attr("x",function(d,i){return v.x(poss[i]-.5)}).attr("y",function(d){return v.y(d[1])}).attr("height",function(d){return v.y(d[0])-v.y(d[1])}),add=sel.enter().append("rect").attr("x",function(d,i){return v.x(poss[i]-.5)}).attr("y",v.y(0)).attr("height",0).attr("width",v.x(1)-v.x(0)).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.on("mouseover",function(d,i){return tip("show",{pos:poss[i],value:d[1]-d[0]})}).transition(t3).attr("x",function(d,i){return v.x(poss[i]-.5)}).attr("y",function(d){return v.y(d[1])}).attr("height",function(d){return v.y(d[0])-v.y(d[1])})},chart}var _toConsumableArray,axisBottom,axisLeft,axisRight,scaleLinear,scaleOrdinal,stack,transition,d3sel,d4;return _export("default",Chart),{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0012BabelHelpersToConsumableArrayJs.default},function(_d3Axis){axisBottom=_d3Axis.axisBottom,axisLeft=_d3Axis.axisLeft,axisRight=_d3Axis.axisRight},function(_d3Scale){scaleLinear=_d3Scale.scaleLinear,scaleOrdinal=_d3Scale.scaleOrdinal},function(_d3Shape){stack=_d3Shape.stack},function(_d3Transition){transition=_d3Transition.transition},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,transition:transition,axisBottom:axisBottom,axisLeft:axisLeft,axisRight:axisRight,stack:stack,scaleLinear:scaleLinear,scaleOrdinal:scaleOrdinal}:d3}}}),System.register("components/projects/mutbypos/component.js",["common/charts/mutbypos"],function(_export,_context){"use strict";function controller(){function draw(){chart.init(),update()}function update(){chart.data($ctrl.dataPackage.resources[0].data),chart.update()}function dispatch(action){chart.consumer(action)}var $ctrl=this,paramChart={div:"charts",id:"mutbypos",title:"Mutation by position example",xRange:[0,325],frames:[{label:"CDR1",x1:79,x2:114,fill:"#eee"},{label:"CDR2",x1:166,x2:195,fill:"#eee"}],masks:[{label:"primer",x1:1,x2:30,fill:"#808"},{label:"primer",x1:315,x2:325,fill:"#808"}],dispatch:dispatch},chart=new Chart(paramChart);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Chart;return{setters:[function(_commonChartsMutbypos){Chart=_commonChartsMutbypos.default}],execute:function(){_export("default",{controller:controller,templateUrl:"components/projects/mutbypos/template.html",bindings:{dataPackage:"<package"}})}}}),System.register("common/charts/treemap.js",["d3-hierarchy","d3-transition","d3-scale","d3-scale-chromatic","d3-shape","d3-selection"],function(_export,_context){"use strict";function Chart(p){function line(d){var ax=void 0,ay=void 0,bx=void 0,by=void 0,mw=5,mh=22,rw=d.x1-d.x0,rh=d.y1-d.y0;rw<rh?(ax=d.x0+rw/2,ay=d.y0,bx=ax,by=d.y1,ay+mw<by-mw&&rw>mh?(ay+=mw,by-=mw):by=ay):(ax=d.x0,ay=d.y0+rh/2,bx=d.x1,by=ay,ax+mw<bx-mw&&rh>mh?(ax+=mw,bx-=mw):bx=ax);var path=d4.line().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(d4.curveLinear);return path([[ax,ay],[bx,by]])}function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){var txt="name: "+d.data.name+"\n          <br/>value: "+f(d.value);return d.data.data&&Object.keys(d.data.data).forEach(function(k){txt+="<br/>"+k+": "+d.data.data[k]}),txt});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var x=0,y=0;d3sel.event?(y=d3sel.event.pageY,x=d3sel.event.pageX):(y=d3.event.layerY,x=d3.event.layerX),d4.select("#tip").style("top",y-10+"px").style("left",x+10+"px")}}function f(i){return Number(i).toLocaleString("en")}function id(d){return d.data.id?d.data.id:d.data.name}var chart={version:1.1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{name:"root",size:1},p.title=p.title||"Treemap of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:0,left:0,right:0},p.color=p.color||d4.schemeSet3;var color=d4.scaleOrdinal(p.color);return chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){console.log("chart init");var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),svg.append("g").attr("transform","translate("+p.margin.left+", "+(p.margin.top+20)+")").classed("rects",!0),svg.append("g").attr("transform","translate("+p.margin.left+", "+(p.margin.top+20)+")").classed("labels",!0);var header=svg.append("g").attr("transform","translate("+p.margin.left+", "+p.margin.top+")").classed("header",!0).style("font-size","14px");header.append("rect").attr("y",0).attr("width",p.width-p.margin.left-p.margin.right).attr("height",20).style("fill","#888").style("cursor","pointer"),header.append("text").attr("x",6).attr("y",4).attr("dy",".75em").text("Root")},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){console.log("chart.update");var root=d4.hierarchy(p.data);d4.treemap().size([p.width-p.margin.left-p.margin.right,p.height-p.margin.top-p.margin.bottom-20]).round(!1).padding(2)(root.sum(function(d){return d.size})),console.log("root",root),d4.select("#"+p.id).select(".header").select("rect").datum(root).on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)});var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=d4.select("#"+p.id).select(".rects").selectAll("rect").data(root.descendants().filter(function(d){return d.x1-d.x0>0&&d.y1-d.y0>0}),function(d){return id(d)}),sel.exit().transition(t1).attr("transform","translate(0,0)").attr("width",0).attr("height",0).style("opacity",0).remove(),sel.transition(t2).attr("transform",function(d){return"translate("+d.x0+", "+d.y0+")"}).attr("width",function(d){return d.x1-d.x0}).attr("height",function(d){return d.y1-d.y0}),add=sel.enter().append("rect").attr("class",function(d){return"v"+id(d)}).attr("transform","translate(0,0)").attr("width",0).attr("height",0).style("opacity",0).style("fill",function(d){return color(d.data.name)}).style("stroke","#000").style("cursor","pointer").on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.transition(t3).attr("transform",function(d){return"translate("+d.x0+", "+d.y0+")"}).attr("width",function(d){return d.x1-d.x0}).attr("height",function(d){return d.y1-d.y0}).style("opacity",1),sel=d4.select("#"+p.id).select(".labels").selectAll("path").data(root.descendants().filter(function(d){return!d.children&&d.x1-d.x0>0&&d.y1-d.y0>0}),function(d){return id(d)}),sel.exit().transition(t1).attr("d","M0,0L0,0").style("opacity",0).remove(),sel.transition(t2).attr("d",function(d,i){return line(d,i)}),add=sel.enter().append("path").attr("id",function(d){return"map"+p.id+id(d)}).attr("d","M0,0L0,0").style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d,i){return line(d,i)}),sel=d4.select("#"+p.id).select(".labels").selectAll("text").data(root.descendants().filter(function(d){return!d.children&&d.x1-d.x0>0&&d.y1-d.y0>0}),function(d){return id(d)}),sel.exit().transition(t1).remove(),add=sel.enter().append("text").attr("class",function(d){return"t"+id(d)}).attr("text-anchor","left").attr("dy","0.5ex").style("pointer-events","none").append("textPath").attr("xlink:href",function(d){return"#map"+p.id+id(d)}).text(function(d){return d.data.name})},chart}var hierarchy,treemap,transition,scaleOrdinal,schemeSet3,line,curveLinear,d3sel,d4;return _export("default",Chart),{setters:[function(_d3Hierarchy){hierarchy=_d3Hierarchy.hierarchy,treemap=_d3Hierarchy.treemap},function(_d3Transition){transition=_d3Transition.transition},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal},function(_d3ScaleChromatic){schemeSet3=_d3ScaleChromatic.schemeSet3},function(_d3Shape){line=_d3Shape.line,curveLinear=_d3Shape.curveLinear},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,hierarchy:hierarchy,treemap:treemap,transition:transition,scaleOrdinal:scaleOrdinal,schemeSet3:schemeSet3,line:line,curveLinear:curveLinear}:d3}}}),System.register("common/charts/sunburst.js",["d3-hierarchy","d3-transition","d3-scale","d3-scale-chromatic","d3-shape","d3-selection"],function(_export,_context){"use strict";function Chart(p){function arc(d,edge){var a=x(d.x0),b=x(d.x1),ir=y(d.y0),or=y(d.y1);if("middle"===edge){or=y((d.y0+d.y1)/2);var m=Math.PI-2*Math.acos(2/ir);a+m<b-m?(a+=m,b-=m):b=a}else"extern"===edge&&(or=radius);var path=d4.arc().startAngle(Math.max(0,Math.min(2*Math.PI,a))).endAngle(Math.max(0,Math.min(2*Math.PI,b))).innerRadius(Math.max(0,ir)).outerRadius(Math.max(0,or)),res=void 0;if("middle"===edge){var extract=/[Mm][\d.\-e,\s]+A[\d.\-e,\s]+/,guide=extract.exec(path(d));res=guide?guide[0]:"M0,0A0,0Z"}else res=path(d);return res}function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){var txt="name: "+d.data.name+"\n          <br/>value: "+f(d.value);return d.data.data&&Object.keys(d.data.data).forEach(function(k){txt+="<br/>"+k+": "+d.data.data[k]}),txt});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var _x=0,_y=0;d3sel.event?(_y=d3sel.event.pageY,_x=d3sel.event.pageX):(_y=d3.event.layerY,_x=d3.event.layerX),d4.select("#tip").style("top",_y-10+"px").style("left",_x+10+"px")}}function f(i){return Number(i).toLocaleString("en")}function id(d){return d.data.id?d.data.id:d.data.name}var chart={version:1.1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{name:"root",size:1},p.title=p.title||"Treemap of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:5,left:0,right:0},p.color=p.color||d4.schemeSet3;var color=d4.scaleOrdinal(p.color),radius=Math.min(p.width-p.margin.left-p.margin.right,p.height-p.margin.top-p.margin.bottom)/2,x=d4.scaleLinear().range([0,2*Math.PI]),y=d4.scaleLinear().range([0,radius]);return chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update()}},p.dispatch=p.dispatch||chart.consumer,chart.init=function(){console.log("chart init");var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title),
svg.append("g").attr("transform","translate("+(p.width+p.margin.left)/2+", "+(p.height+p.margin.top)/2+")").classed("arcs",!0),svg.append("g").attr("transform","translate("+(p.width+p.margin.left)/2+", "+(p.height+p.margin.top)/2+")").classed("labels",!0)},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){console.log("chart.update");var root=d4.hierarchy(p.data);d4.partition()(root.sum(function(d){return d.size})),console.log("sunburst root",root);var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=d4.select("#"+p.id).select(".arcs").selectAll("path").data(root.descendants(),function(d){return id(d)}),sel.exit().transition(t1).attr("d","M0,0A0,0Z").style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return arc(d)}),add=sel.enter().append("path").attr("class",function(d){return"v"+id(d)}).attr("d","M0,0A0,0Z").style("opacity",0).style("fill",function(d){return color(d.data.name)}).style("fill-rule","evenodd").style("stroke","#000").style("cursor","pointer").on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return arc(d)}).style("opacity",1),sel=d4.select("#"+p.id).select(".labels").selectAll("path").data(root.descendants(),function(d){return id(d)}),sel.exit().transition(t1).attr("d","M0,0A0,0Z").style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return arc(d,"middle")}),add=sel.enter().append("path").attr("id",function(d){return"map"+p.id+id(d)}).attr("d","M0,0A0,0Z").style("pointer-events","none").style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return arc(d,"middle")}).style("opacity",0),sel=d4.select("#"+p.id).select(".labels").selectAll("text").data(root.descendants(),function(d){return id(d)}),sel.exit().transition(t1).remove(),add=sel.enter().append("text").attr("class",function(d){return"t"+id(d)}).attr("text-anchor","left").attr("dy","0.5ex").style("pointer-events","none").append("textPath").attr("xlink:href",function(d){return"#map"+p.id+id(d)}).text(function(d){return d.data.name})},chart}var hierarchy,partition,transition,scaleOrdinal,scaleLinear,schemeSet3,arc,curveLinear,line,d3sel,d4;return _export("default",Chart),{setters:[function(_d3Hierarchy){hierarchy=_d3Hierarchy.hierarchy,partition=_d3Hierarchy.partition},function(_d3Transition){transition=_d3Transition.transition},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal,scaleLinear=_d3Scale.scaleLinear},function(_d3ScaleChromatic){schemeSet3=_d3ScaleChromatic.schemeSet3},function(_d3Shape){arc=_d3Shape.arc,curveLinear=_d3Shape.curveLinear,line=_d3Shape.line},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,hierarchy:hierarchy,partition:partition,transition:transition,scaleOrdinal:scaleOrdinal,scaleLinear:scaleLinear,schemeSet3:schemeSet3,arc:arc,curveLinear:curveLinear,line:line}:d3}}}),System.register("common/charts/clonal.js",["d3-hierarchy","d3-transition","d3-scale","d3-scale-chromatic","d3-shape","d3-selection"],function(_export,_context){"use strict";function Chart(p){function line(d,mode){var coord=middle(d),ax=coord[0],ay=coord[1],bx=coord[0],by=coord[1];mode&&(ax+=mw,bx=d.children?bx+2*p.space-2*mw:p.width-p.margin.left-p.margin.right);var path=d4.line().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(d4.curveLinear);return path([[ax,ay],[bx,by]])}function tip(state,d){if("show"===state)d4.select("#tip").datum(d).style("opacity",1).html(function(d){var txt="name: "+d.data.name+"\n          <br/>value: "+f(d.value);return d.data.data&&Object.keys(d.data.data).forEach(function(k){txt+="<br/>"+k+": "+d.data.data[k]}),txt});else if("hide"===state)d4.select("#tip").style("opacity",0);else{var x=0,y=0;d3sel.event?(y=d3sel.event.pageY,x=d3sel.event.pageX):(y=d3.event.layerY,x=d3.event.layerX),d4.select("#tip").style("top",y-10+"px").style("left",x+10+"px")}}function f(i){return Number(i).toLocaleString("en")}function id(d){return d.data.id?d.data.id:d.data.name}var chart={version:1.1};p=p||{},p.div=p.div||"body",p.id=p.id||"view",p.data=p.data||{name:"root",size:1},p.title=p.title||"Clonal Evolution of "+p.id,p.titleSize=p.titleSize||20,p.fontSize=p.fontSize||14,p.width=p.width||800,p.height=p.height||600,p.margin=p.margin||{top:30,bottom:10,left:50,right:50},p.shape=p.shape||"curve",p.color=p.color||null;var color=d4.scaleOrdinal(p.color?p.color:d4.schemeSet3),mw=6,mh=22;chart.consumer=function(action){switch(action.type){case"init":chart.init();break;case"update":p.data=action.data,chart.update()}},p.dispatch=p.dispatch||chart.consumer;var middle=function(d){return[d.y0,(d.x0+d.x1)/2]},area=function(d,show){var coord=middle(d),path=void 0,f="L";return show?"comb"===p.shape?path="M"+(p.width-p.margin.left-p.margin.right)+", "+d.x0+("L"+d.y1+", "+d.x0)+(""+f+coord[0]+", "+coord[1]+" "+d.y1+", "+d.x1)+("L"+(p.width-p.margin.left-p.margin.right)+", "+d.x1):("curve"===p.shape&&(f="C"),path="M"+(p.width-p.margin.left-p.margin.right)+", "+d.x0+" "+("L"+d.y1+", "+d.x0)+(""+f+(d.y0+p.space)+", "+d.x0+" "+(d.y0+p.space)+", "+coord[1]+" "+coord[0]+", "+coord[1])+(""+f+(d.y0+p.space)+", "+coord[1]+" "+(d.y0+p.space)+", "+d.x1+" "+d.y1+", "+d.x1)+("L"+(p.width-p.margin.left-p.margin.right)+", "+d.x1)):path="M"+coord[0]+", "+coord[1]+" L"+coord[0]+", "+coord[1],path};return chart.init=function(){var svg=d4.select("#"+p.div).append("svg").attr("id",p.id).attr("title",p.title).attr("width",p.width).attr("height",p.height);svg.append("g").attr("class","title").append("text").attr("x",0).attr("y",p.margin.top/2).attr("dy","0.5ex").style("font-size",p.titleSize+"px").text(p.title);var tree=svg.append("g").attr("class","tree").attr("transform","translate("+p.margin.left+", "+p.margin.top+")").style("font-size",p.fontSize+"px");tree.append("g").attr("class","edges"),tree.append("g").attr("class","nodes"),tree.append("path").attr("class","edge hl").style("fill","none").style("stroke","#000").style("stroke-width","1.5px").style("pointer-events","none"),svg.append("g").attr("class","labels").attr("transform","translate("+p.margin.left+", "+p.margin.top+")")},chart.data=function(d){return d&&(p.data=d),p.data},chart.update=function(){var root=d4.hierarchy(p.data);d4.partition().size([p.height-p.margin.top-p.margin.bottom,p.width-p.margin.left-p.margin.right])(root.sum(function(d){return d.size})),p.space=(p.width-p.margin.left-p.margin.right)/(2*root.height);var sel=void 0,add=void 0,delay=500,t1=d4.transition().duration(delay),t2=d4.transition().delay(delay).duration(delay),t3=d4.transition().delay(2*delay).duration(delay);sel=d4.select("#"+p.id).select(".edges").selectAll(".edge").data(root.descendants().filter(function(d){return!d.data.hidden}),function(d){return id(d)}),sel.exit().transition(t1).attr("d",function(d){return area(d,!1)}).style("opacity",0).remove(),sel.transition(t2).attr("d",function(d){return area(d,!0)}),add=sel.enter().append("path").attr("class",function(d){return"edge e"+d.data.name.replace(" ","")}).attr("d",function(d){return area(d,!1)}).style("fill",function(d){return color(d.data.name)}).style("stroke","#000").style("stroke-width","1.5px").style("opacity",0).on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return area(d,!0)}).style("opacity",1),sel=d4.select("#"+p.id).select(".nodes").selectAll(".node").data(root.descendants().filter(function(d){return!d.data.hidden}),function(d){return id(d)}),sel.exit().transition(t1).attr("transform",function(d){var coord=middle(d.parent?d.parent:root);return"translate("+coord[0]+", "+coord[1]+")"}).style("opacity",0).remove(),sel.transition(t2).attr("transform",function(d){var coord=middle(d);return"translate("+coord[0]+", "+coord[1]+")"}),add=sel.enter().append("g").attr("class",function(d){return"node n"+d.data.name.replace(" ","")}).attr("transform",function(d){var coord=middle(d.parent?d.parent:root);return"translate("+coord[0]+", "+coord[1]+")"}).style("cursor","pointer").style("opacity",0).on("mouseover",function(d){return tip("show",d)}).on("mousemove",function(d){return tip("move",d)}).on("mouseout",function(d){return tip("hide",d)}),add.append("circle").style("fill",function(d){return color(d.data.name)}).style("stroke-width","2px"),sel=add.merge(sel),sel.transition(t3).attr("transform",function(d){var coord=middle(d);return"translate("+coord[0]+", "+coord[1]+")"}).style("opacity",1),sel.select("circle").attr("r",function(d){return d.data.collapsed?5.5:4.5}).style("stroke",function(d){return d.data.collapsed?"#324eb3":"#000000"}),sel=d4.select("#"+p.id).select(".labels").selectAll("path").data(root.descendants().filter(function(d){return!d.data.hidden&&d.x1-d.x0>mh}),function(d){return id(d)}),sel.exit().transition(t1).attr("d",function(d){return line(d,!1)}).remove(),sel.transition(t2).attr("d",function(d){return line(d,!0)}),add=sel.enter().append("path").attr("id",function(d){return"map"+p.id+id(d)}).attr("d",function(d){return line(d,!1)}).style("opacity",0),sel=add.merge(sel),sel.transition(t3).attr("d",function(d){return line(d,!0)}),sel=d4.select("#"+p.id).select(".labels").selectAll("text").data(root.descendants().filter(function(d){return!d.data.hidden&&d.x1-d.x0>mh}),function(d){return id(d)}),sel.exit().transition(t1).remove(),add=sel.enter().append("text").attr("class",function(d){return"t"+id(d)}).attr("text-anchor","left").attr("dy","0.5ex").style("pointer-events","none").append("textPath").attr("xlink:href",function(d){return"#map"+p.id+id(d)}).text(function(d){return d.data.name})},chart}var hierarchy,partition,transition,scaleOrdinal,schemeSet3,line,curveLinear,d3sel,d4;return _export("default",Chart),{setters:[function(_d3Hierarchy){hierarchy=_d3Hierarchy.hierarchy,partition=_d3Hierarchy.partition},function(_d3Transition){transition=_d3Transition.transition},function(_d3Scale){scaleOrdinal=_d3Scale.scaleOrdinal},function(_d3ScaleChromatic){schemeSet3=_d3ScaleChromatic.schemeSet3},function(_d3Shape){line=_d3Shape.line,curveLinear=_d3Shape.curveLinear},function(_d3Selection){d3sel=_d3Selection}],execute:function(){d4={},d4="undefined"===d3||d3.version?{select:d3sel.select,selectAll:d3sel.selectAll,hierarchy:hierarchy,partition:partition,transition:transition,scaleOrdinal:scaleOrdinal,schemeSet3:schemeSet3,curveLinear:curveLinear,line:line}:d3}}}),System.register("components/projects/taxonomy/complete-tree.js",[],function(_export,_context){"use strict";function CompleteTree(data){var root={name:"root",id:"10",size:0,children:[],data:{rank:"no rank",sample:0,taxonID:1}};return bkeys.push(root.id),bobjs.push(root),complete(data,"",1),root}function complete(n,p,s){n.data.taxonID=Number(n.id),n.id=String(n.id).replace(/\s+/g,"_")+"0","no rank"===n.data.rank&&""!==p&&(n.data.rank=p.data.rank);var nsk=void 0,idx=bkeys.indexOf(n.id);if(idx>-1){if(nsk=bobjs[idx],""!==p&&ranks.indexOf(p.data.rank)>ranks.indexOf(nsk.parent.data.rank)){nsk.parent.children.splice(nsk.parent.children.indexOf(nsk),1);var psk=bobjs[bkeys.indexOf(p.id)];psk.children.push(nsk)}}else{var _psk=bobjs[bkeys.indexOf(p.id)];nsk={name:n.name,size:0,children:[],parent:_psk,data:{rank:n.data.rank,sample:0,taxonID:n.data.taxonID},id:n.id},_psk.children.push(nsk),bkeys.push(nsk.id),bobjs.push(nsk)}if("0"!==n.data.assigned){var tag={name:n.name,size:Number(n.data.assigned),children:[],data:{rank:n.data.rank,sample:s,taxonID:n.data.taxonID},id:String(n.data.taxonID)+s};nsk.children.push(tag)}n.children.length>0&&n.children.forEach(function(c){return complete(c,n,s)})}var bkeys,bobjs,ranks;return _export("default",CompleteTree),{setters:[],execute:function(){bkeys=[],bobjs=[],ranks=["no rank","superkingdom","kingdom","subkingdom","superphylum","phylum","subphylum","superclass","class","subclass","infraclass","superorder","order","suborder","infraorder","parvorder","superfamily","family","subfamily","tribe","subtribe","genus","subgenus","species group","species subgroup","species","subspecies","varietas","forma"]}}}),System.register("components/projects/taxonomy/component.js",["../../../common/charts/treemap","../../../common/charts/sunburst","../../../common/charts/clonal","./complete-tree"],function(_export,_context){"use strict";function controller($log,dataService){function draw(){dispatch({type:"init"}),update()}function update(){dispatch({type:"update",data:tree})}function dispatch(action){treemap.consumer(action),sunburst.consumer(action),clonal.consumer(action)}var $ctrl=this;console.log("data",$ctrl.dataPackage.resources[0].data);var tree=completeTree($ctrl.dataPackage.resources[0].data);console.log("tree",tree);var paramTreemap={div:"charts",id:"treemap",dispatch:dispatch,title:"Treemap of "+$ctrl.dataPackage.resources[0].name,width:700,height:500},treemap=new Treemap(paramTreemap),paramSunburst={div:"charts",id:"sunburst",dispatch:dispatch,title:"Sunburst of "+$ctrl.dataPackage.resources[0].name,width:700,height:500},sunburst=new Sunburst(paramSunburst),paramClonal={div:"charts",id:"clonal",dispatch:dispatch,title:"Clonal Evolution of "+$ctrl.dataPackage.resources[0].name,width:700,height:900},clonal=new Clonal(paramClonal);return Object.assign($ctrl,{editorOptions:{data:$ctrl.dataPackage,onChange:update},$onInit:function(){draw()}})}var Treemap,Sunburst,Clonal,completeTree;return{setters:[function(_commonChartsTreemap){Treemap=_commonChartsTreemap.default},function(_commonChartsSunburst){Sunburst=_commonChartsSunburst.default},function(_commonChartsClonal){Clonal=_commonChartsClonal.default},function(_completeTree){completeTree=_completeTree.default}],execute:function(){controller.$inject=["$log","dataService"],_export("default",{controller:controller,templateUrl:"components/projects/taxonomy/taxonomy.html",bindings:{dataPackage:"<package"}})}}}),System.register("components/projects/projects-index/routes.js",["angular","./component","../mutbypos/component","../taxonomy/component"],function(_export,_context){"use strict";function routeConfig($routeProvider){$routeProvider.when("/projects",{template:'<projects data-package="$resolve.dataPackage"></projects>',datapackageUrl:"components/projects/projects-index/datapackage.json"}).when("/projects/mutbypos",{template:'<mutbypos data-package="$resolve.dataPackage"></mutbypos>',datapackageUrl:"components/projects/mutbypos/datapackage.json"}).when("/projects/taxonomy",{template:'<taxonomy data-package="$resolve.dataPackage"></taxonomy>',datapackageUrl:"components/projects/taxonomy/datapackage.json"}).otherwise({redirectTo:"/"})}var angular,projectsComponent,mutbyposComponent,taxonomyComponent;return{setters:[function(_angular){angular=_angular.default},function(_component){projectsComponent=_component.default},function(_mutbyposComponent){mutbyposComponent=_mutbyposComponent.default},function(_taxonomyComponent){taxonomyComponent=_taxonomyComponent.default}],execute:function(){routeConfig.$inject=["$routeProvider"],_export("default",angular.module("projects-index",["projectX.dataService"]).component("projects-idx",projectsComponent).component("mutbypos",mutbyposComponent).component("taxonomy",taxonomyComponent).config(routeConfig))}}}),System.register("common/utils/list-index.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<!--<div ng-include="\'common/partials/intro.html\'"></div>-->\n\n<div class="row _common_styles_index__index">\n  <h2 class="title">{{$ctrl.dataPackage.title}}</h2>\n  <p class="lead" marked="$ctrl.dataPackage.description"></p>\n  <div class="row">\n    <div class="col-md-4" ng-repeat="(filename,file) in $ctrl.dataPackage.resources" ng-if="file.data">\n      <a ng-href="{{file.link}}">\n        <div class="card" style="background-image: url({{file.data.image}});">\n          <div>\n            <h3>{{file.data.name}}</h3>\n            <p marked="file.data.description"></p>\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n</div>\n')}}}),System.register("common/utils/list-component.js",["./list-index.html!text","common/styles/index.css!"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)})}var template;return{setters:[function(_listIndexHtmlText){template=_listIndexHtmlText.default},function(_commonStylesIndexCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,template:template,bindings:{dataPackage:"<package"}})}}}),System.register("components/projects/projects-index/component.js",["../../../common/utils/list-component","common/styles/index.css!"],function(_export,_context){"use strict";var component;return{setters:[function(_commonUtilsListComponent){component=_commonUtilsListComponent.default},function(_commonStylesIndexCss){}],execute:function(){_export("default",component)}}}),System.register("components/index/routes.js",["angular","../charts/charts-index/routes","../charts/charts-index/component","../projects/projects-index/routes","../projects/projects-index/component"],function(_export,_context){"use strict";function routeConfig($routeProvider){$routeProvider.when("/charts",{template:'<charts data-package="$resolve.dataPackage"></charts>',datapackageUrl:"components/charts/charts-index/datapackage.json"}).when("/projects",{template:'<projects data-package="$resolve.dataPackage"></projects>',datapackageUrl:"components/projects/projects-index/datapackage.json"}).otherwise({redirectTo:"/"})}var angular,chartsRoutes,chartsComponent,projectsRoutes,projectsComponent;return{setters:[function(_angular){angular=_angular.default},function(_chartsChartsIndexRoutes){chartsRoutes=_chartsChartsIndexRoutes.default},function(_chartsChartsIndexComponent){chartsComponent=_chartsChartsIndexComponent.default},function(_projectsProjectsIndexRoutes){projectsRoutes=_projectsProjectsIndexRoutes.default},function(_projectsProjectsIndexComponent){projectsComponent=_projectsProjectsIndexComponent.default}],execute:function(){routeConfig.$inject=["$routeProvider"],_export("default",angular.module("index-routes",["projectX.dataService",chartsRoutes.name,projectsRoutes.name]).component("charts",chartsComponent).component("projects",projectsComponent).config(routeConfig))}}}),System.register("components/index/index.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div ng-include="\'common/partials/intro.html\'"></div>\n\n<div class="row _common_styles_index__index">\n  <div class="row" ng-repeat="(filename,file) in $ctrl.dataPackage.resources">\n    <h2 class="title">{{file.data.title}}</h2>\n    <p class="lead" marked="file.data.description"></p>\n\n    <div class="col-md-4" ng-repeat="(filename,file) in file.data.resources">\n      <a ng-href="{{file.link}}">\n        <div class="card" style="background-image: url({{file.data.image}});">\n          <div>\n            <h3>{{file.data.title}}</h3>\n            <p marked="file.data.description"></p>\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n</div>\n')}}}),System.registerDynamic("common/styles/index.css!github:systemjs/plugin-css@0.1.32/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.registerDynamic("common/styles/charts.css!github:systemjs/plugin-css@0.1.32/css.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){}(this),_retrieveGlobal()}),System.register("components/index/component.js",["./index.html!text","common/styles/index.css!","common/styles/charts.css!"],function(_export,_context){"use strict";function controller(dataService){this.dataPackage.resources.forEach(function(resource){return dataService.normalizePackage(resource.url,resource.data),dataService.loadPackage(resource.url).then(function(dataPackage){dataPackage.resources.forEach(function(resource){dataService.normalizePackage(resource.url,resource.data)}),resource.data=dataPackage})})}var template;return{setters:[function(_indexHtmlText){template=_indexHtmlText.default},function(_commonStylesIndexCss){},function(_commonStylesChartsCss){}],execute:function(){controller.$inject=["dataService"],_export("default",{controller:controller,template:template,bindings:{dataPackage:"<package"}})}}}),System.register("components/routes.js",["angular","components/index/README.md!md","components/error/error.html!text","./index/routes","./index/component"],function(_export,_context){"use strict";function configRoutes($routeProvider){$routeProvider.when("/about",{template:aboutHTML}).when("/error",{template:errorHTML}).when("/404",{template:errorHTML}).when("/",{template:'<index data-package="$resolve.dataPackage"></index>',datapackageUrl:"components/index/datapackage.json"}).otherwise({redirectTo:"/"})}var angular,aboutHTML,errorHTML,indexRoutes,indexComponent;return{setters:[function(_angular){angular=_angular.default},function(_componentsIndexREADMEMdMd){aboutHTML=_componentsIndexREADMEMdMd.default},function(_componentsErrorErrorHtmlText){errorHTML=_componentsErrorErrorHtmlText.default},function(_indexRoutes){indexRoutes=_indexRoutes.default},function(_indexComponent){indexComponent=_indexComponent.default}],execute:function(){configRoutes.$inject=["$routeProvider"],_export("default",angular.module("routes",[indexRoutes.name]).component("index",indexComponent).config(configRoutes))}}}),System.register("common/directives/svg-download-dropdown.js",["angular-downloadsvg-directive"],function(_export,_context){"use strict";function link(scope,element,attr){function getSVGs(){var el=attr.svgDownloadDropdown?angular.element(document.querySelector(sAttr[1])):element.parent,svgs=el.find("svg"),ids=[];angular.forEach(svgs,function(svg,d){var elm=angular.element(svg),id=elm.attr("id")||"svg-"+d,title=elm.attr("title")||id,o={id:id,title:title};elm.attr(o),ids.push(o)}),scope[sAttr[0]]=ids}var sAttr=attr.svgDownloadDropdown.split(/\sin\s/);getSVGs(),element.on("click",function(){scope.$apply(function(){getSVGs()})})}var module;return{setters:[function(_angularDownloadsvgDirective){}],execute:function(){module=angular.module("svgDownloadDropdown",["hc.downloader"]).directive("svgDownloadDropdown",function(){return{link:link}}).run(["$rootScope","cfpLoadingBar","$log",function($rootScope,cfpLoadingBar,$log){$rootScope.$on("$svgSaver:start",function(){$log.debug("$svgSaver:start"),cfpLoadingBar.start()}),$rootScope.$on("$svgSaver:end",function(){cfpLoadingBar.complete()}),$rootScope.$on("$svgSaver:error",function(){cfpLoadingBar.complete()})}]),_export("default",module.name)}}}),System.register("common/directives/file-drop.js",["angular","common/services/datapackage/datapackage"],function(_export,_context){"use strict";function fileReadService($log,growl){var service={processFile:function(file,scope){var reader=new FileReader;reader.onload=function(evt){file.content=evt.target.result;var type=file.type||dp.mime.lookup(file.name);if(service.checkSize(file.size,scope)&&service.checkType(type,scope))return scope.$apply(function(){scope.onReadFile({file:file})})},reader.readAsText(file)},checkSize:function(size,opts){var _ref=opts.maxFileSize;return void 0===_ref||""===_ref||size/1024/1024<opts.maxFileSize||(growl.error("File must be smaller than "+opts.maxFileSize+" MB"),!1)},checkType:function(type,opts){return void 0===opts.validMimeTypes||""===opts.validMimeTypes||opts.validMimeTypes.indexOf(type)>-1||(growl.error("Invalid file type "+type+".  File must be one of following types "+opts.validMimeTypes),!1)}};return service}function onReadFileDirective(fileRead){return{restrict:"A",scope:{onReadFile:"&",validMimeTypes:"@accept",maxFileSize:"@"},link:function(scope,element){return element.on("change",function(event){null!==event&&event.preventDefault();for(var files=(event.srcElement||event.target).files,i=0;i<files.length;i++)fileRead.processFile(files[i],scope)})}}}function fileDropzoneDirective(fileRead){return{restrict:"A",scope:{onReadFile:"&dropped",validMimeTypes:"@fileDropzone",maxFileSize:"@"},link:function(scope,element){function processDragOverOrEnter(event){return null!==event&&event.preventDefault(),element.addClass("hover"),(event.dataTransfer||event.originalEvent.dataTransfer).effectAllowed="copy",!1}function processDragLeave(event){return null!==event&&event.preventDefault(),element.removeClass("hover"),!1}return element.bind("dragover",processDragOverOrEnter),element.bind("dragenter",processDragOverOrEnter),element.bind("dragleave",processDragLeave),element.bind("drop",function(event){null!==event&&event.preventDefault(),element.removeClass("hover");for(var files=(event.dataTransfer||event.originalEvent.dataTransfer).files,i=0;i<files.length;i++){var file=files[i];fileRead.processFile(file,scope)}return!1})}}}var angular,dp;return _export("fileReadService",fileReadService),{setters:[function(_angular){angular=_angular.default},function(_commonServicesDatapackageDatapackage){dp=_commonServicesDatapackageDatapackage.default}],execute:function(){fileReadService.$inject=["$log","growl"],onReadFileDirective.$inject=["fileRead"],fileDropzoneDirective.$inject=["fileRead"],_export("default",angular.module("projectX.fileDrop",["angular-growl"]).service("fileRead",fileReadService).directive("onReadFile",onReadFileDirective).directive("fileDropzone",fileDropzoneDirective).name)}}}),System.register("common/directives/file-download.js",["angular","FileSaver/FileSaver.js","blobjs/Blob.js"],function(_export,_context){"use strict";var angular,saveAs,module;return{setters:[function(_angular){angular=_angular.default},function(_FileSaverFileSaverJs){saveAs=_FileSaverFileSaverJs.default},function(_blobjsBlobJs){}],execute:function(){module=angular.module("projectX.fileDownload",[]).directive("fileDownload",function(){return{scope:{file:"=fileDownload"},link:function(scope,element){function download(file){var mime=file.type||"text/plain",type=mime+";charset=utf-8",filename=file.name||"download.txt",blob=new Blob([file.content],{type:type});saveAs(blob,filename)}element.bind("click",function(){download(scope.file)})}}}),_export("default",module.name)}}}),System.register("common/services/datapackage/resolver.js",["angular"],function(_export,_context){"use strict";var angular;return _export("default",function(route){var hasDatapackageResolve=angular.isDefined(route.resolve)&&angular.isDefined(route.resolve.dataPackage);return hasDatapackageResolve||(angular.isDefined(route.datapackage)?(route.resolve=route.resolve||{},angular.extend(route.resolve,{dataPackage:["$route","dataService",function($route,dataService){var datapackage="function"==typeof route.datapackage?route.datapackage($route.current.params):route.datapackage,base=datapackage.base||route.datapackageUrl;return dataService.processPackage(base,datapackage)}]})):angular.isDefined(route.datapackageUrl)&&(route.resolve=route.resolve||{},angular.extend(route.resolve,{dataPackage:["$route","dataService",function($route,dataService){var datapackageUrl="function"==typeof route.datapackageUrl?route.datapackageUrl($route.current.params):route.datapackageUrl;return dataService.loadPackage(datapackageUrl)}]}))),route}),{setters:[function(_angular){angular=_angular.default}],execute:function(){}}}),System.register("common/services/datapackage/dataservice.js",["npm:systemjs-plugin-babel@0.0.12/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.12/babel-helpers/asyncToGenerator.js","mobx","./datapackage"],function(_export,_context5){"use strict";function run($http){dp.loader.fetch=function(url){return $http({url:url,method:"GET",cache:!1,transformResponse:function(data){return data}}).then(function(res){return res.data})}}function dataservice($log,growl){function __processResource(resource){var processed=toJS(Object.assign({},resource,{$error:null,errors:[],data:[]}));try{processed=dp.processor.resource(processed),processed.errors&&processed.errors.length>0&&(processed.$error=new Error("Errors processing resource "+processed.name))}catch(err){processed.$error=err,processed.errors=processed.errors||[],processed.errors.shift({code:"Parsing",type:err.name,message:"Parsing error: "+err.message})}return processed.$error||processed.errors.length>0?(resource.errors=processed.errors,resource.$error=processed.$error,resource.$error.message=resource.name,resource.$valid=!1,dataservice.warn(resource.$error,{title:"Error processing resource"})):(resource.errors=[],resource.$error=null,resource.data=processed.data,resource.$lastValidContent=toJS(resource.content)),resource}function __normalizePackage(url,datapackage){return 2===arguments.length?Object.assign(datapackage,{url:url}):datapackage=url,dp.normalizePackage(datapackage)}function makePackage(datapackage){return isObservable(datapackage)?datapackage:(datapackage=new Package(datapackage),autorun(function(){datapackage.resources.forEach(function(resource){if(resource.errors&&resource.errors.length>0)return dataservice.error("Errors processing resource "+resource.name,{title:"Error processing DataPackage"})})}),datapackage)}DEBUG&&!function(){var processResource=dp.processor.resource.bind(dp.processor);dp.processor.resource=function(resource){console.time(resource.name),$log.debug("Processing",resource.name);var r=processResource(resource);return console.timeEnd(resource.name),r};var index=dp.Normalizer.index.bind(dp.Normalizer);dp.Normalizer.index=function(datapackage){return $log.debug("Re-indexing",datapackage.name),index(datapackage)}}();var dataservice={dp:dp,normalize:dp.normalize,mime:dp.normalize.mime,translators:dp.processor.translators,index:dp.Normalizer.index,warn:function(err,opts){$log.warn(err),growl.warning(err.message||String(err),opts)},error:function(err,opts){return $log.error(err),growl.error(err.message||String(err),opts),Promise.reject(err)},loadPackage:function(datapackage){var _this=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var msg;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,transaction(function(){return makePackage(datapackage).load()});case 3:return _context.abrupt("return",_context.sent);case 6:return _context.prev=6,_context.t0=_context.catch(0),msg=_context.t0.status?_context.t0.statusText+"; "+_context.t0.data:String(_context.t0),_context.abrupt("return",dataservice.error(msg,{title:"Error loading DataPackage"}));case 10:case"end":return _context.stop()}},_callee,_this,[[0,6]])}))()},processPackage:function(url,datapackage){var _this2=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,makePackage(url).update(datapackage);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}},_callee2,_this2)}))()},loadResource:function(datapackage,res){var _this3=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var msg;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:
return _context3.prev=0,_context3.next=3,transaction(function(){return makeResource(datapackage,res).load()});case 3:return _context3.abrupt("return",_context3.sent);case 6:return _context3.prev=6,_context3.t0=_context3.catch(0),msg=_context3.t0.status?_context3.t0.statusText+"; "+_context3.t0.data:String(_context3.t0),_context3.abrupt("return",dataservice.error(msg,{title:"Error loading resource"}));case 10:case"end":return _context3.stop()}},_callee3,_this3,[[0,6]])}))()},normalizeResource:function(p,r){return Object.assign(r,dp.normalize.resource(p,r))},processResource:__processResource,normalizePackage:__normalizePackage,reloadResource:function(resource){var _this4=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_context4.t0=Object,_context4.t1=resource,_context4.next=5,dp.loader.resource(resource);case 5:return _context4.t2=_context4.sent,_context4.t0.assign.call(_context4.t0,_context4.t1,_context4.t2),_context4.abrupt("return",dp.processResource(resource));case 10:return _context4.prev=10,_context4.t3=_context4.catch(0),$log.error(_context4.t3),_context4.abrupt("return",resource);case 14:case"end":return _context4.stop()}},_callee4,_this4,[[0,10]])}))()},makeResourceObservable:makeResource,makePackageObservable:makePackage};return dataservice}var _regeneratorRuntime,_asyncToGenerator,toJS,autorun,isObservable,transaction,dp,Package,makeResource,DEBUG;return _export("run",run),_export("dataservice",dataservice),{setters:[function(_npmSystemjsPluginBabel0012RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0012RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0012BabelHelpersAsyncToGeneratorJs.default},function(_mobx){toJS=_mobx.toJS,autorun=_mobx.autorun,isObservable=_mobx.isObservable,transaction=_mobx.transaction},function(_datapackage){dp=_datapackage.default,Package=_datapackage.Package,makeResource=_datapackage.makeResource}],execute:function(){DEBUG=!System.production,run.$inject=["$http"],dataservice.$inject=["$log","growl"]}}}),System.register("common/services/datapackage/index.js",["angular","./resolver","./dataservice"],function(_export,_context){"use strict";var angular,addDataPackageResolver,run,dataservice,module;return{setters:[function(_angular){angular=_angular.default},function(_resolver){addDataPackageResolver=_resolver.default},function(_dataservice){run=_dataservice.run,dataservice=_dataservice.dataservice}],execute:function(){module=angular.module("projectX.dataService",["ngRoute"]).service("dataService",dataservice).run(run).decorator("$route",["$delegate",function($delegate){return angular.forEach($delegate.routes,addDataPackageResolver),$delegate}]),_export("default",module.name)}}}),System.registerDynamic("common/services/datapackage/datapackage.js",["chi-datapackage/dist/store","chi-datapackage/dist/normalizer"],!0,function($__require,exports,module){this||self;const store=$__require("chi-datapackage/dist/store"),Normalizer=$__require("chi-datapackage/dist/normalizer"),dataPackageService=store.dataPackageService;return dataPackageService.Normalizer=Normalizer,dataPackageService.Resource=store.Resource,dataPackageService.Package=store.Package,dataPackageService.makeResource=store.makeResource,dataPackageService.makePackage=store.makePackage,dataPackageService.mime=dataPackageService.normalize.mime,module.exports=dataPackageService,module.exports}),System.register("common/components/editor/editor.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div ng-if="$ctrl.options.enableProtected && $ctrl.panel.open">\n  <alert close="closeAlert = true" type="warning" ng-hide="closeAlert">\n    This is your chance to play with the featured visualization.  No changes you make will be saved.\n  </alert>\n</div>\n\n<section id="datapckage-editor" class="datapckage-editor-container hidden-print" style="position: relative">\n\n  <div class="pull-right panel-toggle">\n    <button id="data-add" type="button" class="btn btn-link btn-sm" tooltip="Add new resource"\n      ng-show="$ctrl.options.enableAdd && $ctrl.panel.open"\n      ng-click="$ctrl.newFile()"\n      file-dropzone="{{$ctrl.options.types}}"\n      data-max-file-size="30"\n      dropped="$ctrl.dropped(file)">\n      <i class="fa fa-plus-square" aria-hidden="true"></i>\n    </button>\n\n    <button type="button" class="btn btn-primary btn-sm"\n      ng-click="$ctrl.play()"\n      ng-if="$ctrl.options.enableProtected">\n      Try your own data\n    </button>\n\n    <button id="data-drop" type="button" class="btn btn-primary btn-sm" tooltip="Add new resource"\n      ng-if="$ctrl.options.enableDrop"\n      file-dropzone="{{$ctrl.options.types}}"\n      data-max-file-size="30"\n      dropped="$ctrl.droppedOver($ctrl.data.resources.length - 1, file)">\n      Drop your own data here\n    </button>\n\n    <button id="toogle-panel" type="button" class="btn btn-link btn-sm" tooltip="Show/hide resources panel"\n      ng-show="$ctrl.options.enableOpen"\n      ng-click="$ctrl.tooglePanel()">\n      <i class="fa fa-cog" aria-hidden="true"></i>\n    </button>\n  </div>\n\n  <form name="userForm" ng-submit="$ctrl.submit(userForm)">\n    <uib-tabset id="dataPackageEditor" class="datapckage-editor-tab"\n      active="$ctrl.activeTab"\n      ng-show="$ctrl.panel.open"\n      ng-if="$ctrl.options.enableOpen || $ctrl.options.enableProtected">\n      <uib-tab ng-repeat="tab in $ctrl.resources track by $index" select="$ctrl.ui.refresh()">\n        <uib-tab-heading\n          file-dropzone="{{$ctrl.options.types}}"\n          data-max-file-size="30"\n          dropped="$ctrl.droppedOver($index, file)">\n          {{ $ctrl.resources.length < 7 ? tab.name : $index }}\n          <a class="close" ng-click="$ctrl.remove($index)">&nbsp;&times;</a>\n        </uib-tab-heading>\n        <div file-dropzone="{{$ctrl.options.types}}" data-max-file-size="30" dropped="$ctrl.droppedOver($index, file)">\n\n          <div class="col-xs-12 mini-well">\n            <div class="col-md-3">\n              <label class="sr-only">Filename</label>\n              <input type="text" id="label" class="form-control input-sm"\n                ng-model="tab.name" placeholder="filename"\n                ng-model-options="{ updateOn: \'submit\' }"\n                ng-change="$ctrl.rename(tab)">\n            </div>\n            <div class="col-md-3">\n              <label class="sr-only">Media Type</label>\n              <select class="form-control input-sm"\n                ng-options="value as value for value in $ctrl.options.types"\n                ng-model="tab.mediatype"\n                ng-model-options="{ updateOn: \'submit\' }"\n                xxx-change="$ctrl.change(tab)"></select>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-xs-12">\n              <textarea class="editor"\n                resource="tab"\n                name="input{{$index}}"\n                ui-codemirror\n                ng-model="tab.content"\n                ng-model-options="{ updateOn: \'submit\', debounce: 200, getterSetter: false }"\n                xxx-change="$ctrl.change(tab, userForm[\'input\' + $index])"\n                ui-codemirror-opts="{\n                  lineNumbers: true,\n                  lineWrapping: false,\n                  allowDropFileTypes: false,\n                  mode: tab.format,\n                  onLoad: $ctrl.ui.codemirrorLoaded\n                }"\n                ui-refresh="$ctrl.ui.count"\n                >\n              </textarea>\n                <div class="col-xs-12 bg-danger">\n                  <ul class="list-unstyled">\n                    <li ng-repeat="error in tab.errors | limitTo:10">\n                      <span ng-if="error.row >= 0">row {{error.row}}: </span>{{error.message}}\n                    </li>\n                  </ul>\n                </div>\n            </div>\n          </div>\n        </div>\n      </uib-tab>\n    </uib-tabset>\n\n    <ng-transclude></ng-transclude>\n\n    <div class="btn-toolbar" role="toolbar" aria-label="toolbar">\n      <div id="data-download" class="btn-group" uib-dropdown>\n        <button type="button" class="btn btn-primary btn-sm dropdown-toggle" uib-dropdown-toggle aria-expanded="false" ng-if="$ctrl.options.enableFileDownload">\n          <div class="pull-right">\n            <i class="fa fa-arrow-circle-o-down" aria-hidden="true"></i>\n            Download Data <span class="caret"></span>\n          </div>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li class="dropdown-header">Data Resources</li>\n          <li ng-repeat="file in $ctrl.resources" ng-hide="file.hide">\n            <a class="btn btn-link" file-download="file" title="{{file.description}}">{{file.name}}</a>\n          </li>\n        </ul>\n      </div>\n\n      <div id="svg-download" class="btn-group hidden-print"\n        uib-dropdown svg-download-dropdown="svgList in #charts"\n        ng-if="$ctrl.options.enableSvgDownload || $ctrl.options.enablePngDownload">\n        <button type="button" class="btn btn-primary btn-sm dropdown-toggle"\n          uib-dropdown-toggle aria-expanded="false">\n          <div class="pull-right">\n            <i class="fa fa-picture-o" aria-hidden="true"></i>\n            Download SVG <span class="caret"></span>\n          </div>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-repeat-start="svg in svgList" ng-show="$ctrl.options.enableSvgDownload">\n            <a href svg-download="#{{svg.id}}" title="{{svg.title}}">{{svg.title}} as SVG</a>\n          </li>\n          <li ng-repeat-end ng-show="$ctrl.options.canDownloadPng">\n            <a href svg-download="#{{svg.id}}" title="{{svg.title}}" type="png">{{svg.title}} as PNG</a>\n          </li>\n        </ul>\n      </div>\n\n      <div class="pull-right btn-toolbar" ng-show="$ctrl.panel.open">\n        <button type="submit" class="btn btn-primary btn-sm">Apply changes</button>\n        <button class="btn btn-danger btn-sm"\n          ng-click="$ctrl.cancel(userForm)">Cancel</button>\n      </div>\n    </div>\n  </form>\n</section>\n')}}}),System.register("common/components/editor/editor-controller.js",["npm:systemjs-plugin-babel@0.0.12/babel-helpers/extends.js","mobx"],function(_export,_context){"use strict";function controller($scope,$cookies,$timeout,$log,growl,dataservice){function cancel(form){$log.debug("cancel"),form.$rollbackViewValue(),hasPackage?$ctrl.resources=$ctrl.options.data.resources.slice():$ctrl.resources=[],form.$setPristine()}function submit(form){form.$valid&&($log.debug("submit"),hasPackage&&(isObservable($ctrl.options.data.resources)?$ctrl.options.data.replaceResources($ctrl.resources):($ctrl.options.data.resources=$ctrl.resources,$ctrl.options.data.$resourcesByName=$ctrl.options.data.resourcesByName=dataservice.index($ctrl.options.data))),$timeout(function(){$ctrl.options.onChange()}))}function createNewResource(name){var content=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return name=name||"new."+$ctrl.options.defaultFormat,{path:name,name:name,mediatype:dataservice.mime.lookup(name),content:content,schema:$ctrl.options.defaultSchema}}function fileDroppedOver($index,file){$log.debug("fileDroppedOver",$index,file);var resource=createNewResource(file.name,file.content);$ctrl.activeTab=$index,$ctrl.resources[$index]=resource,$ctrl.ui.refresh()}function fileDropped(file){$log.debug("fileDropped",file),addResource(file.name,file.content)}function addResource(name){var content=arguments.length<=1||void 0===arguments[1]?"":arguments[1];$log.debug("addResource",name,content);var resource=createNewResource(name,content);return $ctrl.resources.push(resource),$timeout(function(){$ctrl.ui.refresh(),$ctrl.activeTab=$ctrl.resources.length-1}),!1}function play(){tooglePanel()}function removeResourceByIndex(i){i>-1&&$ctrl.resources.splice(i,1)}function tooglePanel(){$ctrl.panel.open=!$ctrl.panel.open,$ctrl.ui.refresh(),$timeout($ctrl.ui.refresh,100)}var $ctrl=this,hasOptions=Boolean($ctrl.options),hasPackage=hasOptions&&Boolean($ctrl.options.data),hasResources=hasPackage&&$ctrl.options.data.resources.length>0,isSafari=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),isIE="undefined"!=typeof window.navigator.msSaveBlob,enableFileDownload=hasPackage&&hasResources;return $scope.$ctrl.options=$ctrl.options||{},Object.assign($ctrl.options,_extends({enableOpen:hasPackage,enableFileDownload:enableFileDownload,enableSvgDownload:!0,enablePngDownload:!isSafari&&!isIE,enableAdd:!0,enableDrop:!1,enableProtected:!1,types:Object.keys(dataservice.translators),defaultFormat:hasResources?$ctrl.options.data.resources[0].format:"txt",defaultSchema:hasResources?$ctrl.options.data.resources[0].schema:void 0,onChange:function(){}},$ctrl.options)),Object.assign($ctrl,{activeTab:0,resources:hasResources?$ctrl.options.data.resources.slice():[],panel:{open:!1},remove:removeResourceByIndex,newFile:addResource,dropped:fileDropped,droppedOver:fileDroppedOver,submit:submit,cancel:cancel,tooglePanel:tooglePanel,play:play,ui:{refresh:function(){$ctrl.ui.count++},count:0,codemirrorLoaded:function(cm){$timeout(function(){cm.refresh(),$ctrl.ui.refresh()},100)}}})}var _extends,isObservable;return _export("default",controller),{setters:[function(_npmSystemjsPluginBabel0012BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0012BabelHelpersExtendsJs.default},function(_mobx){isObservable=_mobx.isObservable}],execute:function(){controller.$inject=["$scope","$cookies","$timeout","$log","growl","dataService"]}}}),System.register("common/components/editor/editor.js",["angular","ui-codemirror","codemirror/lib/codemirror","codemirror/lib/codemirror.css!","./editor.less!","common/directives/svg-download-dropdown","common/directives/file-drop","common/directives/file-download","common/services/datapackage/index","common/services/datapackage/datapackage","./editor.html!text","./editor-controller"],function(_export,_context){"use strict";var angular,svgDropdownDownload,fileDrop,fileDownload,dataServices,template,controller,editor;return{setters:[function(_angular){angular=_angular.default},function(_uiCodemirror){},function(_codemirrorLibCodemirror){},function(_codemirrorLibCodemirrorCss){},function(_editorLess){},function(_commonDirectivesSvgDownloadDropdown){svgDropdownDownload=_commonDirectivesSvgDownloadDropdown.default},function(_commonDirectivesFileDrop){fileDrop=_commonDirectivesFileDrop.default},function(_commonDirectivesFileDownload){fileDownload=_commonDirectivesFileDownload.default},function(_commonServicesDatapackageIndex){dataServices=_commonServicesDatapackageIndex.default},function(_commonServicesDatapackageDatapackage){},function(_editorHtmlText){template=_editorHtmlText.default},function(_editorController){controller=_editorController.default}],execute:function(){editor=angular.module("projectX.dataEditor",["ui.codemirror",dataServices,svgDropdownDownload,fileDrop,fileDownload]).directive("datapackageEdit",function(){return{restrict:"A",scope:{},bindToController:{options:"=?datapackageEdit"},controller:controller,controllerAs:"$ctrl",transclude:!0,template:template}}).component("packageEditor",{template:template,controller:controller,transclude:!0,bindings:{options:"=?"}}),_export("default",editor.name)}}}),System.register("common/services/loading-bar/loading-bar.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div id="loading-bar-spinner" class="text-center">\r\n  <div class="spinner-box">\r\n    <div class="spinner-icon"></div>\r\n  </div>\r\n</div>\r\n')}}}),System.register("common/services/loading-bar/loading-bar.js",["angular","angular-loading-bar","angular-loading-bar/build/loading-bar.css!","./loading-bar.less!","./loading-bar.html!text"],function(_export,_context){"use strict";var angular,spinnerTemplate,mod;return{setters:[function(_angular){angular=_angular.default},function(_angularLoadingBar){},function(_angularLoadingBarBuildLoadingBarCss){},function(_loadingBarLess){},function(_loadingBarHtmlText){spinnerTemplate=_loadingBarHtmlText.default}],execute:function(){mod=angular.module("projectX.loading-bar",["angular-loading-bar"]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.latencyThreshold=32,cfpLoadingBarProvider.spinnerTemplate=spinnerTemplate}]).run(["$rootScope","cfpLoadingBar",function($rootScope,cfpLoadingBar){$rootScope.$on("$routeChangeStart",function(){cfpLoadingBar.start()}),$rootScope.$on("$routeChangeError",function(){cfpLoadingBar.complete()}),$rootScope.$on("$routeChangeSuccess",function(){cfpLoadingBar.complete()})}]),_export("default",mod.name)}}}),System.register("common/services/dynamic-title/dynamic-title.js",["angular"],function(_export,_context){"use strict";function setupRouteChange($rootScope,dynamicTitle){$rootScope.$on("$routeChangeSuccess",function(event,current){return dynamicTitle.fromState(current)})}function DynamicTitleProvider(){function DynamicTitle($document,$log){function set(title){title=title||configuration.defaultTitle,$log.debug("title set to",title),$document[0].title=title}return{set:set,fromState:function($state){var value=null;$state.$$route&&$state.$$route.title&&(value="function"==typeof $state.$$route.title?$state.$$route.title($state.params):$state.$$route.title),set(value)}}}var configuration={defaultTitle:document.title||"Project-χ"};this.configure=function(value){angular.extend(configuration,value)},this.$get=DynamicTitle,DynamicTitle.$inject=["$document","$log"]}var angular,module;return{setters:[function(_angular){angular=_angular.default}],execute:function(){module=angular.module(name,[]).provider("dynamicTitle",DynamicTitleProvider).run(setupRouteChange),_export("default",module.name),setupRouteChange.$inject=["$rootScope","dynamicTitle"],DynamicTitleProvider.$inject=[]}}}),System.register("common/services/growl/growl.js",["angular-growl/build/angular-growl.js","angular-growl/build/angular-growl.css!","angular"],function(_export,_context){"use strict";function runGrowl($rootScope,$location,growl){$rootScope.$on("$routeChangeError",function(event,curr,prev,rej){return"string"!=typeof rej&&(rej=rej.status&&rej.statusText?rej.status+" "+rej.statusText:rej.message?rej.message:String(rej)),growl.error(rej,{title:"Failed to change routes"})})}var angular,mod;return{setters:[function(_angularGrowlBuildAngularGrowlJs){},function(_angularGrowlBuildAngularGrowlCss){},function(_angular){angular=_angular.default}],execute:function(){mod=angular.module("projectX.growl",["angular-growl"]).run(runGrowl),_export("default",mod.name),runGrowl.$inject=["$rootScope","$location","growl"]}}}),System.register("common/directives/resize.js",["angular"],function(_export,_context){"use strict";function onResize($window,$timeout){return{scope:{onResize:"&"},link:function(scope){function debounceRedraw(){timeout&&$timeout.cancel(timeout),timeout=$timeout(function(){scope.onResize()},500)}function resize(){scope.onResize()}var timeout=null;angular.element($window).on("resize",debounceRedraw),"matchMedia"in window&&window.matchMedia("print").addListener(resize),scope.$on("$destroy",function(){angular.element($window).off("resize",debounceRedraw),"matchMedia"in window&&window.matchMedia("print").removeListener(resize)})}}}var angular,module;return{setters:[function(_angular){angular=_angular.default}],execute:function(){module=angular.module("projectX.onResize",[]).directive("onResize",onResize),_export("default",module.name),onResize.$inject=["$window","$timeout"]}}}),System.register("common/directives/active-path.js",["angular"],function(_export,_context){"use strict";function activePathDirective($log,$location){return{link:function(scope,element,attrs){var re=new RegExp(attrs.activePath);scope.$watch(function(){return $location.path()},function(value){re.test(value)?element.addClass("active"):element.removeClass("active")})}}}var angular,activePath;return{setters:[function(_angular){angular=_angular.default}],execute:function(){activePath=angular.module("projectX.activePath",[]).directive("activePath",activePathDirective),_export("default",activePath.name),activePathDirective.$inject=["$log","$location"]}}}),System.register("common/common.js",["angular","common/services/datapackage/index","common/components/editor/editor","common/services/loading-bar/loading-bar","common/services/dynamic-title/dynamic-title","common/services/growl/growl","common/directives/resize","common/directives/active-path"],function(_export,_context){"use strict";var angular,dataServices,dataPackageEditor,loadingBar,dynamicTitle,growl,onResize,activePath,common;return{setters:[function(_angular){angular=_angular.default},function(_commonServicesDatapackageIndex){dataServices=_commonServicesDatapackageIndex.default},function(_commonComponentsEditorEditor){dataPackageEditor=_commonComponentsEditorEditor.default},function(_commonServicesLoadingBarLoadingBar){loadingBar=_commonServicesLoadingBarLoadingBar.default},function(_commonServicesDynamicTitleDynamicTitle){dynamicTitle=_commonServicesDynamicTitleDynamicTitle.default},function(_commonServicesGrowlGrowl){growl=_commonServicesGrowlGrowl.default},function(_commonDirectivesResize){onResize=_commonDirectivesResize.default},function(_commonDirectivesActivePath){activePath=_commonDirectivesActivePath.default}],execute:function(){common=angular.module("projectX.common",[dataServices,dataPackageEditor,onResize,loadingBar,dynamicTitle,growl,activePath]),_export("default",common.name)}}}),System.register("common/partials/footer.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div class="container">\n\t<p>Website designed and built at RIKEN, Japan.</p>\n\t<p>Visualisations\n\t\t// <a href="https://github.com/mhebrard/chi-lib">GitHub</a>\n\t\t// <a ng-href="#/about">About</a>\n\t\t// <a href="https://github.com/mhebrard/chi-lib/issues">Issues</a>\n\t</p>\n\t<p>Project-χ toolkit:\n\t\t// <a href="https://github.com/Hypercubed/Project-chi">GitHub</a>\n\t\t// <a ng-href="http://hypercubed.github.io/Project-Chi/#/about">About</a>\n\t\t// <a href="https://github.com/Hypercubed/Project-Chi/issues">Issues</a>\n\t</p>\n</div>\n')}}}),System.register("common/partials/header.html!github:systemjs/plugin-text@0.0.9/text.js",[],function(_export,_context){"use strict";var __useDefault;return{setters:[],execute:function(){_export("__useDefault",__useDefault=!0),_export("__useDefault",__useDefault),_export("default",'<div class="header">\n\t<div class="navbar navbar-default" role="navigation">\n\t\t<div class="container">\n\t\t\t<div class="navbar-header">\n\n\t\t\t\t<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse">\n\t\t\t\t\t<span class="sr-only">Toggle navigation</span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t</button>\n\n\t\t\t\t<a class="navbar-brand" href="#/">Visualization Gallery of LIB</a>\n\t\t\t</div>\n\n\t\t\t<div class="collapse navbar-collapse pull-right" id="js-navbar-collapse">\n\t\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t\t<li active-path="/about"><a ng-href="#/about">About</a></li>\n\t\t\t\t\t<li><a href="//github.com/mhebrard/chi-lib/issues">Feedback</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}}}),System.register("components/app.component.js",["common/partials/footer.html!text","common/partials/header.html!text"],function(_export,_context){"use strict";var footerHTML,headerHTML,AppComponent;return{setters:[function(_commonPartialsFooterHtmlText){footerHTML=_commonPartialsFooterHtmlText.default},function(_commonPartialsHeaderHtmlText){headerHTML=_commonPartialsHeaderHtmlText.default}],execute:function(){AppComponent={template:'\n    <div class="header">\n      '+headerHTML+'\n    </div>\n\n    <div class="container">\n      <div ng-view autoscroll class="ng-fade"></div>\n    </div>\n\n    <div class="footer">\n      '+footerHTML+"\n    </div>\n\n    <div growl></div>"},_export("default",AppComponent)}}}),System.register("components/app.js",["./app.css!","angular","angular-route","angular-animate","angular-cookies","angular-sanitize","angular-touch","angular-ui-bootstrap","angular-marked","components/routes","common/common","./app.component"],function(_export,_context){"use strict";var angular,angularMarked,routes,common,AppComponent;return{setters:[function(_appCss){},function(_angular){angular=_angular.default},function(_angularRoute){},function(_angularAnimate){},function(_angularCookies){},function(_angularSanitize){},function(_angularTouch){},function(_angularUiBootstrap){},function(_angularMarked){angularMarked=_angularMarked.default},function(_componentsRoutes){routes=_componentsRoutes.default},function(_commonCommon){common=_commonCommon.default},function(_appComponent){AppComponent=_appComponent.default}],execute:function(){_export("default",angular.module("projectX",["ngRoute","ngAnimate","ngCookies","ngSanitize","ngTouch","ui.bootstrap",angularMarked,routes.name||routes,common]).component("app",AppComponent).config(["$logProvider","$compileProvider",function($logProvider,$compileProvider){$logProvider.debugEnabled(!System.production),$compileProvider.debugInfoEnabled(!System.production)}]).config(["$animateProvider",function($animateProvider){$animateProvider.classNameFilter(/ng-animate-enabled/)}]))}}}),System.register("components/boot.js",["webcomponentsjs/webcomponents-lite.js","core-js/client/shim","FileSaver/FileSaver.js","bootstrap/less/bootstrap.less!","font-awesome/less/font-awesome.less!","angular","./app"],function(_export,_context){"use strict";var saveAs,angular,app;return{setters:[function(_webcomponentsjsWebcomponentsLiteJs){},function(_coreJsClientShim){},function(_FileSaverFileSaverJs){saveAs=_FileSaverFileSaverJs.default},function(_bootstrapLessBootstrapLess){},function(_fontAwesomeLessFontAwesomeLess){},function(_angular){angular=_angular.default},function(_app){app=_app.default}],execute:function(){window.saveAs=saveAs,angular.element(document).ready(function(){angular.bootstrap(document.body,[app.name],{strictDi:!0})})}}});
//# sourceMappingURL=app-bundle.js.map